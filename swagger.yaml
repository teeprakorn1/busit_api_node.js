openapi: 3.0.0
info:
  title: BusitPlus API
  version: 1.0.0
  description: >
    BusitPlus API documentation for the BusitPlus system.

servers:
  - url: http://localhost:3000
    description: Local development server

paths:
  /api/health:
    get:
      summary: Check server status
      description: Endpoint to check if the server is running properly
      tags:
        - Test
      responses:
        '200':
          description: Server is running
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Server is Running."
                  status:
                    type: boolean
                    example: true
  /api/test/encrypt:
    post:
      summary: Encrypt Password
      description: Encrypts a plain text password using Bcrypt and returns the hashed value.
      tags:
        - Test
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - password
              properties:
                password:
                  type: string
                  example: mypassword123
                  description: The plain text password to be encrypted.
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - password
              properties:
                password:
                  type: string
                  example: mypassword123
                  description: The plain text password to be encrypted.
      responses:
        '200':
          description: Password encrypted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "$2b$14$p.Fv7a5PbQVrwnSgQGFfHe96gpZKB0xRPIY.PN4FvWyfvhHC08gR2"
                    description: The Bcrypt hashed password.
                  status:
                    type: boolean
                    example: true
                    description: Indicates success.
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Password is required."
                    description: Error message.
                  status:
                    type: boolean
                    example: false
                    description: Indicates failure.
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "This API is not allowed in production."
                    description: Error message.
                  status:
                    type: boolean
                    example: false
                    description: Indicates failure.
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Internal server error."
                    description: Error message.
                  status:
                    type: boolean
                    example: false
                    description: Indicates failure.

  /api/test/decrypt:
    post:
      summary: Decrypt Password
      description: Decrypts a plain text password against a Bcrypt hash.
      tags:
        - Test
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - password
                - hash
              properties:
                password:
                  type: string
                  example: mypassword123
                  description: The plain text password to decrypt.
                hash:
                  type: string
                  example: "$2b$14$p.Fv7a5PbQVrwnSgQGFfHe96gpZKB0xRPIY.PN4FvWyfvhHC08gR2"
                  description: The Bcrypt hashed password to compare against.
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - password
                - hash
              properties:
                password:
                  type: string
                  example: mypassword123
                  description: The plain text password to decrypt.
                hash:
                  type: string
                  example: "$2b$14$p.Fv7a5PbQVrwnSgQGFfHe96gpZKB0xRPIY.PN4FvWyfvhHC08gR2"
                  description: The Bcrypt hashed password to compare against.
      responses:
        '200':
          description: Password decrypted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "The password is correct."
                    description: Verification message.
                  status:
                    type: boolean
                    example: true
                    description: Indicates success.
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Password and hash are required."
                    description: Error message.
                  status:
                    type: boolean
                    example: false
                    description: Indicates failure.
        '403':
            description: Forbidden
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    message:
                      type: string
                      example: "This API is not allowed in production."
                      description: Error message.
                    status:
                      type: boolean
                      example: false
                      description: Indicates failure.
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Internal server error."
                    description: Error message.
                  status:
                    type: boolean
                    example: false
                    description: Indicates failure.

  /api/test/sendotp:
    post:
      summary: Send OTP
      description: This endpoint sends a one-time password (OTP) to a user's email address.
      tags:
        - Test
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
      responses:
        '200':
          description: OTP sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: OTP sent successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid email input
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Please provide a valid email address.
                  status:
                    type: boolean
                    example: false
        '429':
          description: Rate limit exceeded
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Exceeded the OTP request limit.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred while sending OTP.
                  status:
                    type: boolean
                    example: false

  /api/test/verifyotp:
    post:
      tags:
        - Test
      summary: Verify OTP
      description: Verifies the OTP (One-Time Password) submitted by the user.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - otp
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                otp:
                  type: string
                  example: "123456"
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - email
                - otp
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                otp:
                  type: string
                  example: "123456"
      responses:
        '200':
          description: OTP is valid and verified successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: OTP verification successful
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid OTP or bad request.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: OTP is invalid.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Internal server error during OTP verification.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred while verifying OTP.
                  status:
                    type: boolean
                    example: false

  /api/test/sendemail:
    post:
      summary: Send Email
      description: >
        Send a test email to the specified address.
      tags:
        - Test
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
                  description: The recipient email address
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
                  description: The recipient email address
      responses:
        '200':
          description: Email sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Email sent successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid or missing email address
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Please provide a valid email address.
                  status:
                    type: boolean
                    example: false
        '403':
          description: API not allowed in production environment
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: This API is not allowed in production.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server error while sending email
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred while sending email.
                  status:
                    type: boolean
                    example: false

  /api/verifyToken:
    post:
      summary: Verify Token
      description: Verifies a JWT token from the `Authorization` header in Bearer format.
      tags:
        - Verify
      security:
        - bearerAuth: [] 
      responses:
        '200':
          description: Token verified successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Token is valid.
                  status:
                    type: boolean
                    example: true
        '401':
          description: Token missing or invalid
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Authorization token is required or invalid.
                  status:
                    type: boolean
                    example: false
        '403':
          description: Token expired or malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid or expired token.
                  status:
                    type: boolean
                    example: false

  paths:
  /api/verifyToken-website:
    post:
      summary: Verify Token for Website Admin
      description: Verifies the JWT token sent via HttpOnly cookie and returns user info if valid.
      tags:
        - Verify
      responses:
        '200':
          description: Token is valid
          content:
            application/json:
              schema:
                type: object
                properties:
                  Users_ID:
                    type: integer
                    example: 123
                  Users_Email:
                    type: string
                    example: user@example.com
                  Users_Username:
                    type: string
                    example: username123
                  UsersType_ID:
                    type: integer
                    example: 1
                  Users_Type:
                    type: string
                    example: teacher
                  Login_Type:
                    type: string
                    example: website
                  message:
                    type: string
                    example: Token is valid.
                  status:
                    type: boolean
                    example: true
        '401':
          description: Invalid token
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid token.
                  status:
                    type: boolean
                    example: false
      security: []

  /api/system/resetpassword:
    post:
      summary: Reset user password
      description: Reset password using the current password. Requires the user email, current password, and new password.
      tags:
        - System
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Users_Email
                - Current_Password
                - New_Password
              properties:
                Users_Email:
                  type: string
                  format: email
                  example: user@example.com
                Current_Password:
                  type: string
                  format: password
                  example: oldpassword123
                New_Password:
                  type: string
                  format: password
                  example: newpassword456
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Users_Email
                - Current_Password
                - New_Password
              properties:
                Users_Email:
                  type: string
                  format: email
                  example: user@example.com
                Current_Password:
                  type: string
                  format: password
                  example: oldpassword123
                New_Password:
                  type: string
                  format: password
                  example: newpassword456
      responses:
        '200':
          description: Password reset successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Password reset successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid input parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Please fill in the correct parameters as required.
                  status:
                    type: boolean
                    example: false
        '401':
          description: Current password is incorrect
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Current password is incorrect.
                  status:
                    type: boolean
                    example: false
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User not found.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server or database error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An unexpected error occurred.
                  status:
                    type: boolean
                    example: false

  /api/system/resetpassword-request-otp:
    post:
      summary: Request OTP for resetting password
      description: Sends an OTP to the user's email address if it exists and is active in the system.
      tags:
        - System
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Users_Email
              properties:
                Users_Email:
                  type: string
                  format: email
                  example: user@example.com
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Users_Email
              properties:
                Users_Email:
                  type: string
                  format: email
                  example: user@example.com
      responses:
        '200':
          description: OTP request processed
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: OTP has been sent to your email.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid email input
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Please provide a valid email address.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server or email sending error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Failed to send OTP.
                  status:
                    type: boolean
                    example: false

  /api/system/resetpassword-verify-otp:
    post:
      summary: Verify OTP and generate reset token
      description: Accepts user's email and OTP, verifies the OTP, and if valid,
        generates a reset token to be used for password reset.
      tags:
        - System
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Users_Email
                - otp
              properties:
                Users_Email:
                  type: string
                  format: email
                  example: user@example.com
                  description: User's email address to reset the password
                otp:
                  type: string
                  example: "123456"
                  description: One-time password received via email or SMS
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Users_Email
                - otp
              properties:
                Users_Email:
                  type: string
                  format: email
                  example: user@example.com
                  description: User's email address to reset the password
                otp:
                  type: string
                  example: "123456"
                  description: One-time password received via email or SMS
      responses:
        '200':
          description: OTP verified successfully and reset token generated
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: Token to be used for resetting the password
                    example: "abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
                  message:
                    type: string
                    example: OTP verified successfully. Use the token to reset your password.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid input or OTP verification failed
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Please provide all required fields.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An unexpected error occurred.
                  status:
                    type: boolean
                    example: false

  /api/system/resetpassword-resettoken:
    post:
      summary: Reset password using reset token
      description: |
        This endpoint allows a user to reset their password by providing:
        - Email address
        - New password
        - Valid reset token (previously obtained from OTP verification)
        
        The reset token must not be expired.  
        A notification email will be sent after a successful password change.
      tags:
        - System
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
                - token
              properties:
                Users_Email:
                  type: string
                  format: email
                  example: user@example.com
                  description: Registered user email
                Users_Password:
                  type: string
                  format: password
                  example: MyNewP@ssw0rd!
                  description: New password to set for the user
                token:
                  type: string
                  example: "abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
                  description: Reset token obtained after OTP verification
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
                - token
              properties:
                Users_Email:
                  type: string
                  format: email
                  example: user@example.com
                  description: Registered user email
                Users_Password:
                  type: string
                  format: password
                  example: MyNewP@ssw0rd!
                  description: New password to set for the user
                token:
                  type: string
                  example: "abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
                  description: Reset token obtained after OTP verification
      responses:
        '200':
          description: Password reset successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Password reset successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid parameters or expired/invalid token
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid or expired reset token.
                  status:
                    type: boolean
                    example: false
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User not found.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server error during password reset process
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An unexpected error occurred.
                  status:
                    type: boolean
                    example: false

  /api/images/profile-images/{filename}:
    get:
      summary: Get user profile image
      description: Serve a user profile image by filename.
      tags:
        - Images
      parameters:
        - name: filename
          in: path
          required: true
          schema:
            type: string
          description: Name of the image file (e.g., abc123.jpg)
      responses:
        '200':
          description: Successful image response
          content:
            image/jpeg:
              schema:
                type: string
                format: binary
            image/png:
              schema:
                type: string
                format: binary
        '404':
          description: Image not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Image not found.

  /api/images/profile-images-admin/{filename}:
    get:
      summary: Get profile image by filename (Staff only)
      description: >
        This endpoint allows staff users (via website login) to retrieve profile images by filename.  
        Only `.jpg`, `.jpeg`, and `.png` files are allowed.
      tags:
        - Images
      parameters:
        - in: path
          name: filename
          required: true
          description: The name of the profile image file (with extension).
          schema:
            type: string
            example: user123.png
      responses:
        '200':
          description: Profile image retrieved successfully
          content:
            image/jpeg:
              schema:
                type: string
                format: binary
            image/png:
              schema:
                type: string
                format: binary
        '400':
          description: Invalid filename or file type
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid filename
                  status:
                    type: boolean
                    example: false
        '403':
          description: Permission denied (not staff or not website login)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can access profile images.
                  status:
                    type: boolean
                    example: false
        '404':
          description: Image not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Image not found
                  status:
                    type: boolean
                    example: false
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Internal server error
                  status:
                    type: boolean
                    example: false
      security: []
      
  /api/login/application:
    post:
      summary: Application login 
      description: Application Login a user with email and password, and return a JWT token.
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
              properties:
                Users_Email:
                  type: string
                  example: "student.admin@rmutto.ac.th"
                Users_Password:
                  type: string
                  example: "Cs12345678"
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
              properties:
                Users_Email:
                  type: string
                  example: "student.admin@rmutto.ac.th"
                Users_Password:
                  type: string
                  example: "Cs12345678"
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    description: JWT token for authentication
                  message:
                    type: string
                    example: "The login was successful."
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid input parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Please fill in the correct parameters as required."
                  status:
                    type: boolean
                    example: false
        '401':
          description: Incorrect email or password
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "The password is incorrect."
                  status:
                    type: boolean
                    example: false
        '404':
          description: Invalid user type
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "User type details not found."
                  status:
                    type: boolean
                    example: false
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "An error occurred on the server."
                  status:
                    type: boolean
                    example: false

  /api/login/website:
    post:
      summary: Web Admin Login
      description: Authenticates a teacher or staff user and sets an HttpOnly token cookie
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
              properties:
                Users_Email:
                  type: string
                  description: User email or username
                  example: staff.admin@rmutto.ac.th
                Users_Password:
                  type: string
                  description: User password
                  example: Cs12345678
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
              properties:
                Users_Email:
                  type: string
                  description: User email or username
                  example: staff.admin@rmutto.ac.th
                Users_Password:
                  type: string
                  description: User password
                  example: Cs12345678
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: The login was successful.
                  status:
                    type: boolean
                    example: true
          headers:
            Set-Cookie:
              description: HttpOnly cookie containing JWT token
              schema:
                type: string
                example: token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        '400':
          description: Missing or invalid parameters / Invalid user type
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Please fill in the correct parameters as required.
                  status:
                    type: boolean
                    example: false
        '401':
          description: Email or password incorrect
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Email or password is incorrect.
                  status:
                    type: boolean
                    example: false
        '404':
          description: User type details not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User type details not found.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred on the server.
                  status:
                    type: boolean
                    example: false
      security: []

  /api/logout-website:
    post:
      summary: Logout Web Admin
      description: Clears the user's token cookie and logs out the user
      tags:
        - Authentication
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Logged out successfully.
                  status:
                    type: boolean
                    example: true
        '401':
          description: Unauthorized / Invalid token
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Unauthorized
                  status:
                    type: boolean
                    example: false
      security: []

  /api/timestamp/insert:
    post:
      summary: Insert Application Timestamp
      description: Create a new timestamp entry with a name and type for the current authenticated user.
      tags:
        - Timestamp
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Timestamp_Name
                - TimestampType_ID
              properties:
                Timestamp_Name:
                  type: string
                  example: "Check-in Morning"
                TimestampType_ID:
                  type: integer
                  example: 1
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Timestamp_Name
                - TimestampType_ID
              properties:
                Timestamp_Name:
                  type: string
                  example: "Check-in Morning"
                TimestampType_ID:
                  type: integer
                  example: 1
      responses:
        '200':
          description: Timestamp inserted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Timestamp inserted successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid request parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Please fill in the correct parameters as required.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred on the server.
                  status:
                    type: boolean
                    example: false

  /api/timestamp/website/insert:
    post:
      summary: Insert Website Timestamp
      description: Record a timestamp for website user actions
      tags:
        - Timestamp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                Timestamp_Name:
                  type: string
                  example: "Login success used by user@example.com at 18/08/2025 13:45:00 on Website."
                  description: Timestamp message
                TimestampType_ID:
                  type: integer
                  example: 2
                  description: Type of timestamp (e.g., 1 = Login)
              required:
                - Timestamp_Name
                - TimestampType_ID
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                Timestamp_Name:
                  type: string
                  example: "Login success used by user@example.com at 18/08/2025 13:45:00 on Website."
                  description: Timestamp message
                TimestampType_ID:
                  type: integer
                  example: 2
                  description: Type of timestamp (e.g., 1 = Login)
              required:
                - Timestamp_Name
                - TimestampType_ID
      responses:
        '200':
          description: Timestamp inserted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: boolean
                example:
                  message: "Timestamp inserted successfully."
                  status: true
        '400':
          description: Missing or invalid parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: boolean
                example:
                  message: "Please fill in the correct parameters as required."
                  status: false
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: boolean
                example:
                  message: "An error occurred on the server."
                  status: false
      security: []

  /api/timestamp/get:
    get:
      summary: Get all timestamp records
      description: |
        Retrieve all timestamp records from the system.  
        - Allowed only for **Users_Type = staff** and **Login_Type = website**  
        - Requires **JWT authentication**  
        - Rate limited to **12 requests / 30 seconds**
      tags:
        - Timestamp
      responses:
        "200":
          description: Successfully retrieved timestamp records
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Get timestamps successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Timestamp_ID:
                          type: integer
                          example: 1
                        Timestamp_RegisTime:
                          type: string
                          format: date-time
                          example: "2025-08-21T12:34:56Z"
                        Timestamp_Name:
                          type: string
                          example: "User Login"
                        Timestamp_UserAgent:
                          type: string
                          example: "Mozilla/5.0 (Windows NT 10.0; Win64; x64)"
                        Timestamp_IP_Address:
                          type: string
                          example: "192.168.1.10"
                        TimestampType_ID:
                          type: integer
                          example: 2
                        Users_ID:
                          type: integer
                          example: 15
                        Users_Email:
                          type: string
                          example: "staff@example.com"
                        Users_Type:
                          type: string
                          example: "staff"
                        TimestampType_Name:
                          type: string
                          example: "Login"
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "404":
          description: No timestamps found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No timestamps found for this type.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred on the server.
                  status:
                    type: boolean
                    example: false
      security: []

  /api/timestamp/get/users/{Users_ID}:
    get:
      tags:
        - Timestamp
      summary: Get timestamps by User ID
      description: Retrieve all timestamps associated with a specific user by their Users_ID.
      parameters:
        - in: path
          name: Users_ID
          required: true
          schema:
            type: integer
          description: The ID of the user.
      responses:
        '200':
          description: Successfully retrieved timestamps.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: array
                    items:
                      type: object
                      properties:
                        Timestamp_ID:
                          type: integer
                          example: 1
                        Users_ID:
                          type: integer
                          example: 1
                        Timestamp_RegisTime:
                          type: string
                          format: date-time
                          example: 2025-04-26T12:00:00Z
                        TimestampType_ID:
                          type: integer
                          example: 1
                        TimestampType_Name:
                          type: string
                          example: "timestamp_application_login"
                  status:
                    type: boolean
                    example: true
        '400':
          description: Missing or invalid Users_ID parameter.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Please fill in the correct parameters as required.
                  status:
                    type: boolean
                    example: false
        '404':
          description: No timestamps found for this user.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No timestamps found for this user.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server error while retrieving timestamps.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred on the server.
                  status:
                    type: boolean
                    example: false
    security: []

  /api/timestamp/get/type/{TimestampType_ID}:
    get:
      tags:
        - Timestamp
      summary: Get timestamps by TimestampType_ID
      description: Retrieve all timestamps associated with a specific timestamp type by its ID.
      parameters:
        - in: path
          name: TimestampType_ID
          required: true
          schema:
            type: integer
          description: The ID of the timestamp type.
      responses:
        '200':
          description: Successfully retrieved timestamps.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: array
                    items:
                      type: object
                      properties:
                        Timestamp_ID:
                          type: integer
                          example: 1
                        Users_ID:
                          type: integer
                          example: 1
                        Timestamp_RegisTime:
                          type: string
                          format: date-time
                          example: 2025-04-26T12:00:00Z
                        TimestampType_ID:
                          type: integer
                          example: 1
                        TimestampType_Name:
                          type: string
                          example: "timestamp_application_login"
                  status:
                    type: boolean
                    example: true
                    responses:
        '200':
          description: Successfully retrieved timestamps.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: array
                    items:
                      type: object
                      properties:
                        Timestamp_ID:
                          type: integer
                          example: 1
                        Users_ID:
                          type: integer
                          example: 1
                        Timestamp_RegisTime:
                          type: string
                          format: date-time
                          example: 2025-04-26T12:00:00Z
                        TimestampType_ID:
                          type: integer
                          example: 1
                        TimestampType_Name:
                          type: string
                          example: "timestamp_application_login"
                  status:
                    type: boolean
                    example: true
        '400':
          description: Missing or invalid TimestampType_ID parameter.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Please fill in the correct parameters as required.
                  status:
                    type: boolean
                    example: false
        '404':
          description: No timestamps found for this user.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No timestamps found for this user.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server error while retrieving timestamps.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred on the server.
                  status:
                    type: boolean
                    example: false

  /api/users/search:
    get:
      summary: Search user by email or IP address
      description: >
        This endpoint allows staff (via website login) to search users by email or IP address.  
        Only staff accounts with `Login_Type = website` are permitted.
      tags:
        - Timestamp
      parameters:
        - in: query
          name: email
          schema:
            type: string
            format: email
          required: false
          description: User's email to search for.
        - in: query
          name: ip
          schema:
            type: string
          required: false
          description: User's IP address to search for.
      responses:
        "200":
          description: User found successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User found successfully.
                  status:
                    type: boolean
                    example: true
                  user:
                    type: object
                    properties:
                      Users_ID:
                        type: integer
                        example: 101
                      Users_Email:
                        type: string
                        example: student01@example.com
                      Users_Type:
                        type: string
                        enum: [student, teacher, staff]
                        example: student
                      Full_Name:
                        type: string
                        example: John Doe
                  totalUsers:
                    type: integer
                    example: 1
        "400":
          description: Missing search parameter.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Please provide either email or ip parameter.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied (invalid role or login type).
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "404":
          description: No user found.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No user found for this email.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred on the server.
                  status:
                    type: boolean
                    example: false
    security: []

  /api/timestamp/search:
    get:
      summary: Search timestamp logs
      description: >
        This endpoint allows staff (via website login) to search user timestamp logs  
        by email, IP address, user type, event type, or date range (within the last 90 days).
      tags:
        - Timestamp
      parameters:
        - in: query
          name: email
          schema:
            type: string
            format: email
          required: false
          description: User's email to filter logs.
        - in: query
          name: ip
          schema:
            type: string
          required: false
          description: IP address to filter logs.
        - in: query
          name: user_type
          schema:
            type: string
            enum: [student, teacher, staff]
          required: false
          description: User type to filter logs.
        - in: query
          name: event_type
          schema:
            type: string
          required: false
          description: Timestamp event type (e.g., Login, Logout).
        - in: query
          name: date_from
          schema:
            type: string
            format: date
          required: false
          description: Start date for filtering logs (YYYY-MM-DD).
        - in: query
          name: date_to
          schema:
            type: string
            format: date
          required: false
          description: End date for filtering logs (YYYY-MM-DD).
        - in: query
          name: limit
          schema:
            type: integer
            default: 100
          required: false
          description: Maximum number of results to return (default 100).
      responses:
        "200":
          description: Search completed successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Search completed successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Timestamp_ID:
                          type: integer
                          example: 501
                        Timestamp_RegisTime:
                          type: string
                          format: date-time
                          example: 2025-09-08T14:25:36Z
                        Timestamp_Name:
                          type: string
                          example: Login
                        Timestamp_UserAgent:
                          type: string
                          example: Mozilla/5.0 (Windows NT 10.0; Win64; x64)
                        Timestamp_IP_Address:
                          type: string
                          example: 192.168.1.10
                        TimestampType_ID:
                          type: integer
                          example: 1
                        Users_ID:
                          type: integer
                          example: 101
                        Users_Email:
                          type: string
                          example: staff01@example.com
                        Users_Type:
                          type: string
                          enum: [student, teacher, staff]
                          example: staff
                        TimestampType_Name:
                          type: string
                          example: Login
                  total:
                    type: integer
                    example: 5
                  searchCriteria:
                    type: object
                    properties:
                      email:
                        type: string
                        example: staff01@example.com
                      ip:
                        type: string
                        example: 192.168.1.10
                      user_type:
                        type: string
                        example: staff
                      event_type:
                        type: string
                        example: Login
                      date_from:
                        type: string
                        format: date
                        example: 2025-09-01
                      date_to:
                        type: string
                        format: date
                        example: 2025-09-08
                      limit:
                        type: integer
                        example: 100
        "403":
          description: Permission denied (invalid role or login type).
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred on the server.
                  status:
                    type: boolean
                    example: false
      security: []

  /api/dataedit/website/insert:
    post:
      summary: Insert a new DataEdit record (Staff only)
      description: Create a new data edit entry for tracking modifications by staff on Students, Teachers, Staff, Users, or Activity tables.
      tags:
        - DataEdit
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - DataEdit_ThisId
                - DataEdit_SourceTable
                - DataEditType_ID
              properties:
                DataEdit_ThisId:
                  type: integer
                  example: 101
                DataEdit_Name:
                  type: string
                  example: "Update student profile"
                DataEdit_SourceTable:
                  type: string
                  enum: [Student, Teacher, Staff, Users, Activity]
                  example: "Student"
                DataEditType_ID:
                  type: integer
                  example: 2
      responses:
        "200":
          description: DataEdit inserted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: DataEdit inserted successfully.
                  status:
                    type: boolean
                    example: true
        "400":
          description: Missing or invalid parameters
        "403":
          description: Permission denied
        "404":
          description: Staff not found
        "500":
          description: Internal server error
      security: []

  /api/dataedit/get:
    get:
      summary: Get all DataEdit records (last 90 days) (Staff only)
      description: Retrieve all DataEdit records created in the last 90 days with staff and type details.
      tags:
        - DataEdit
      responses:
        "200":
          description: Data edits retrieved successfully
        "403":
          description: Permission denied
        "404":
          description: No data edits found
        "500":
          description: Internal server error
      security: []

  /api/dataedit/get/staff/{Staff_ID}:
    get:
      summary: Get DataEdit records by Staff ID
      description: Retrieve all DataEdit records created by a specific staff member.
      tags:
        - DataEdit
      parameters:
        - name: Staff_ID
          in: path
          required: true
          description: Staff ID
          schema:
            type: integer
            example: 10
      responses:
        "200":
          description: Data edits retrieved successfully
        "400":
          description: Invalid or missing Staff ID
        "403":
          description: Permission denied
        "404":
          description: No data edits found for this staff
        "500":
          description: Internal server error
      security: []

  /api/dataedit/get/type/{DataEditType_ID}:
    get:
      summary: Get DataEdit records by Edit Type
      description: Retrieve all DataEdit records for a specific edit type.
      tags:
        - DataEdit
      parameters:
        - name: DataEditType_ID
          in: path
          required: true
          description: Data Edit Type ID
          schema:
            type: integer
            example: 2
      responses:
        "200":
          description: Data edits retrieved successfully
        "400":
          description: Invalid or missing DataEditType_ID
        "403":
          description: Permission denied
        "404":
          description: No data edits found for this type
        "500":
          description: Internal server error
      security: []

  /api/dataedit/get/source/{SourceTable}:
    get:
      summary: Get DataEdit records by Source Table
      description: Retrieve DataEdit records filtered by source table within the last 90 days.
      tags:
        - DataEdit
      parameters:
        - name: SourceTable
          in: path
          required: true
          description: Source table name
          schema:
            type: string
            enum: [Student, Teacher, Staff, Users, Activity]
            example: "Teacher"
      responses:
        "200":
          description: Data edits retrieved successfully
        "400":
          description: Invalid or missing SourceTable
        "403":
          description: Permission denied
        "404":
          description: No data edits found for this source table
        "500":
          description: Internal server error
      security: []

  /api/dataedit/search:
    get:
      summary: Search DataEdit records (Staff only)
      description: Search data edits with multiple filters such as email, IP, staff code, edit type, source table, and date range (limited to 90 days).
      tags:
        - DataEdit
      parameters:
        - name: email
          in: query
          required: false
          schema:
            type: string
            example: "staff01@example.com"
        - name: ip
          in: query
          required: false
          schema:
            type: string
            example: "192.168.1.10"
        - name: staff_code
          in: query
          required: false
          schema:
            type: string
            example: "STF001"
        - name: edit_type
          in: query
          required: false
          schema:
            type: string
            example: "Update"
        - name: source_table
          in: query
          required: false
          schema:
            type: string
            enum: [Student, Teacher, Staff, Users, Activity]
            example: "Users"
        - name: date_from
          in: query
          required: false
          schema:
            type: string
            format: date
            example: "2025-01-01"
        - name: date_to
          in: query
          required: false
          schema:
            type: string
            format: date
            example: "2025-03-01"
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            example: 50
      responses:
        "200":
          description: Search completed successfully
        "400":
          description: Invalid search parameters
        "403":
          description: Permission denied
        "500":
          description: Internal server error
      security: []

  /api/staff/search:
    get:
      summary: Search staff by email, staff code, or IP address
      description: Retrieve staff details by searching with email, staff code, or IP address.
      tags:
        - DataEdit
      parameters:
        - name: email
          in: query
          required: false
          schema:
            type: string
            example: "staff01@example.com"
        - name: staff_code
          in: query
          required: false
          schema:
            type: string
            example: "STF001"
        - name: ip
          in: query
          required: false
          schema:
            type: string
            example: "192.168.1.10"
      responses:
        "200":
          description: Staff found successfully
        "400":
          description: Missing search parameter
        "403":
          description: Permission denied
        "404":
          description: Staff not found
        "500":
          description: Internal server error
      security: []

  /api/images/certificate-files/{filename}:
    get:
      summary: Serve certificate image files
      description: Retrieve a certificate image file by filename (only accessible by staff via website login).
      tags:
        - Images
      parameters:
        - name: filename
          in: path
          required: true
          schema:
            type: string
            example: "certificate_001.png"
      responses:
        "200":
          description: Certificate image file served successfully
          content:
            image/png: {}
            image/jpeg: {}
        "400":
          description: Invalid filename or file type
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid filename"
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied (only staff with website login can access)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Permission denied. Only staff can access certificate files."
                  status:
                    type: boolean
                    example: false
        "404":
          description: Certificate image not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Image not found"
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Internal server error"
                  status:
                    type: boolean
                    example: false
      security: []

  /api/admin/signatures:
    get:
      summary: Get all signatures
      description: Retrieve all signature records (only accessible by staff via website login).
      tags:
        - Signatures
      responses:
        "200":
          description: Signatures retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Signatures retrieved successfully."
                  status:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Signature_ID:
                          type: integer
                          example: 1
                        Signature_Name:
                          type: string
                          example: "Director's Signature"
                        Signature_ImageFile:
                          type: string
                          example: "signature_123.png"
                        Signature_RegisTime:
                          type: string
                          format: date-time
                          example: "2025-09-29T12:34:56Z"
        "403":
          description: Permission denied (only staff with website login can access)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Permission denied. Only staff can access signatures."
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Database error while fetching signatures."
                  status:
                    type: boolean
                    example: false
      security: []

    post:
      summary: Add a new signature
      description: Upload a new signature with name and image file (only accessible by staff via website login).
      tags:
        - Signatures
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                signatureName:
                  type: string
                  example: "Principal's Signature"
                signatureFile:
                  type: string
                  format: binary
      responses:
        "201":
          description: Signature added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      Signature_ID:
                        type: integer
                        example: 10
                      Signature_Name:
                        type: string
                        example: "Principal's Signature"
                      Signature_ImageFile:
                        type: string
                        example: "signature_abc.png"
        "400":
          description: Invalid input or missing data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied (only staff can add signatures)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Permission denied. Only staff can add signatures."
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Database error while adding signature."
                  status:
                    type: boolean
                    example: false
      security: []

  /api/admin/signatures/{id}:
    put:
      summary: Update a signature
      description: Update signature name and/or file by ID (only accessible by staff via website login).
      tags:
        - Signatures
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 5
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                signatureName:
                  type: string
                  example: "Updated Signature Name"
                signatureFile:
                  type: string
                  format: binary
      responses:
        "200":
          description: Signature updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      Signature_ID:
                        type: integer
                        example: 5
                      Signature_Name:
                        type: string
                        example: "Updated Signature Name"
                      Signature_ImageFile:
                        type: string
                        example: "signature_new.png"
        "400":
          description: Invalid input or ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid signature ID provided."
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied (only staff can update signatures)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Permission denied. Only staff can update signatures."
                  status:
                    type: boolean
                    example: false
        "404":
          description: Signature not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Database error while updating signature."
                  status:
                    type: boolean
                    example: false
      security: []

    delete:
      summary: Delete a signature
      description: Delete a signature by ID (only accessible by staff via website login).
      tags:
        - Signatures
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 3
      responses:
        "200":
          description: Signature deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: true
        "400":
          description: Invalid ID or signature is in use
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: " "
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied (only staff can delete signatures)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Permission denied. Only staff can delete signatures."
                  status:
                    type: boolean
                    example: false
        "404":
          description: Signature not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Database error while deleting signature."
                  status:
                    type: boolean
                    example: false
      security: []

  /api/admin/templates:
    get:
      summary: Get all templates
      description: Retrieve all templates with optional signature information (only accessible by staff via website login).
      tags:
        - Templates
      responses:
        "200":
          description: Templates retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Templates retrieved successfully."
                  status:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Template_ID:
                          type: integer
                          example: 1
                        Template_Name:
                          type: string
                          example: "Certificate Template 1"
                        Template_ImageFile:
                          type: string
                          example: "template_123.png"
                        Template_PositionX:
                          type: integer
                          example: 100
                        Template_PositionY:
                          type: integer
                          example: 200
                        Template_RegisTime:
                          type: string
                          format: date-time
                          example: "2025-09-29T12:34:56Z"
                        Signature_ID:
                          type: integer
                          example: 5
                        Signature_Name:
                          type: string
                          example: "Director's Signature"
                        Signature_ImageFile:
                          type: string
                          example: "signature_123.png"
        "403":
          description: Permission denied (only staff can access templates)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Permission denied. Only staff can access templates."
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Database error while fetching templates."
                  status:
                    type: boolean
                    example: false
      security: []

    post:
      summary: Add a new template
      description: Upload a new template with name, positions, and optional signature (only accessible by staff via website login).
      tags:
        - Templates
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                templateName:
                  type: string
                  example: "Certificate Template 1"
                positionX:
                  type: integer
                  example: 100
                positionY:
                  type: integer
                  example: 200
                signatureId:
                  type: integer
                  example: 5
                templateFile:
                  type: string
                  format: binary
      responses:
        "201":
          description: Template added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      Template_ID:
                        type: integer
                        example: 10
                      Template_Name:
                        type: string
                        example: "Certificate Template 1"
                      Template_ImageFile:
                        type: string
                        example: "template_abc.png"
                      Template_PositionX:
                        type: integer
                        example: 100
                      Template_PositionY:
                        type: integer
                        example: 200
                      Signature_ID:
                        type: integer
                        example: 5
        "400":
          description: Invalid input or missing data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied (only staff can add templates)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Permission denied. Only staff can add templates."
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Database error while adding template."
                  status:
                    type: boolean
                    example: false
      security: []

  /api/admin/templates/{id}:
    put:
      summary: Update a template
      description: Update template name, positions, signature, and/or file by ID (only accessible by staff via website login).
      tags:
        - Templates
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 5
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                templateName:
                  type: string
                  example: "Updated Template Name"
                positionX:
                  type: integer
                  example: 150
                positionY:
                  type: integer
                  example: 250
                signatureId:
                  type: integer
                  example: 7
                templateFile:
                  type: string
                  format: binary
      responses:
        "200":
          description: Template updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      Template_ID:
                        type: integer
                        example: 5
                      Template_Name:
                        type: string
                        example: "Updated Template Name"
                      Template_ImageFile:
                        type: string
                        example: "template_new.png"
                      Template_PositionX:
                        type: integer
                        example: 150
                      Template_PositionY:
                        type: integer
                        example: 250
                      Signature_ID:
                        type: integer
                        example: 7
        "400":
          description: Invalid input or ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid template ID provided."
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied (only staff can update templates)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Permission denied. Only staff can update templates."
                  status:
                    type: boolean
                    example: false
        "404":
          description: Template not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Database error while updating template."
                  status:
                    type: boolean
                    example: false
      security: []

    delete:
      summary: Delete a template
      description: Delete a template by ID (only accessible by staff via website login).
      tags:
        - Templates
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 3
      responses:
        "200":
          description: Template deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: true
        "400":
          description: Invalid ID or template is in use
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: " "
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied (only staff can delete templates)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Permission denied. Only staff can delete templates."
                  status:
                    type: boolean
                    example: false
        "404":
          description: Template not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Database error while deleting template."
                  status:
                    type: boolean
                    example: false
      security: []

  /api/certificates/generate:
    post:
      summary: Generate a certificate
      description: Generate a certificate for a user based on activity and template (only accessible by staff via website login).
      tags:
        - Certificates
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                activityId:
                  type: integer
                  example: 12
                userId:
                  type: integer
                  example: 34
                templateId:
                  type: integer
                  example: 5
      responses:
        "201":
          description: Certificate generated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      Certificate_ID:
                        type: integer
                        example: 101
                      Certificate_ImageFile:
                        type: string
                        example: "certificate_abc123.png"
                      recipientName:
                        type: string
                        example: " "
                      activityTitle:
                        type: string
                        example: ""
                      endDate:
                        type: string
                        format: date-time
                        example: "2025-09-30T15:00:00Z"
        "400":
          description: Invalid input or certificate already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied (only staff can generate certificates)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Permission denied. Only staff can generate certificates."
                  status:
                    type: boolean
                    example: false
        "404":
          description: User or activity not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: ""
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Database error while generating certificate."
                  status:
                    type: boolean
                    example: false
      security: []

  /api/dataedit/stats:
    get:
      summary: Get DataEdit statistics (Staff only)
      description: Retrieve statistics of DataEdit records in the last 90 days including totals, counts by source table, counts by edit type, and unique staff count.
      tags:
        - DataEdit
      responses:
        "200":
          description: Statistics retrieved successfully
        "403":
          description: Permission denied
        "500":
          description: Internal server error
      security: []

  /api/admin/data/get:
    get:
      summary: Get Admin Data by Verified Token of Website
      description: Retrieves profile data of the logged-in website admin (teacher or staff) based on the verified token.
      tags:
        - Admin
      responses:
        '200':
          description: Profile data retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  Users_Type_Table:
                    type: string
                    example: teacher
                  Users_Email:
                    type: string
                    example: user@example.com
                  Users_ImageFile:
                    type: string
                    example: profile.jpg
                  Teacher_ID:
                    type: integer
                    example: 1
                  Department_Name:
                    type: string
                    example: Computer Science
                  Faculty_Name:
                    type: string
                    example: Engineering
                  message:
                    type: string
                    example: Profile data retrieved successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Bad Request (missing user type/ID or invalid user type)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Missing user type or ID.
                  status:
                    type: boolean
                    example: false
        '403':
          description: Forbidden (login type not website)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. This action is only allowed in the website.
                  status:
                    type: boolean
                    example: false
        '404':
          description: No profile data found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No profile data found for this user.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An unexpected error occurred.
                  status:
                    type: boolean
                    example: false
      security: []

  /api/admin/student/update/{Users_ID}:
    put:
      summary: Update student profile (Admin only)
      description: Allows a staff user to update student profile data by Users_ID.
      tags:
        - Admin
      parameters:
        - name: Users_ID
          in: path
          required: true
          description: Users_ID of the student to be updated
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                Student_Phone:
                  type: string
                  example: "0812345678"
                Student_Birthdate:
                  type: string
                  format: date
                  description: Format DD-MM-YYYY
                  example: "12-08-2004"
                Student_Religion:
                  type: string
                  example: ""
                Student_MedicalProblem:
                  type: string
                  example: ""
              additionalProperties: false
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                Student_Phone:
                  type: string
                  example: "0812345678"
                Student_Birthdate:
                  type: string
                  format: date
                  description: Format DD-MM-YYYY
                  example: "12-08-2004"
                Student_Religion:
                  type: string
                  example: ""
                Student_MedicalProblem:
                  type: string
                  example: ""
              additionalProperties: false
      responses:
        '200':
          description: Successfully updated student profile
          content:
            application/json:
              example:
                Users_ID: 123
                updated_by: 456
                updated_fields: ["Student_Phone", "Student_Birthdate"]
                message: "Student profile updated successfully."
                status: true

        '400':
          description: Bad Request - Invalid input or missing data
          content:
            application/json:
              example:
                message: "Invalid phone number format."
                status: false
        '403':
          description: Permission Denied
          content:
            application/json:
              example:
                message: "Permission denied. Only staff can perform this action."
                status: false
        '404':
          description: Student profile not found or no changes made
          content:
            application/json:
              example:
                message: "Student profile not found."
                status: false
        '500':
          description: Server Error
          content:
            application/json:
              example:
                message: "Database error occurred."
                status: false
      security: []

  /api/admin/teacher/update/{Users_ID}:
    put:
      summary: Update teacher profile (Admin only)
      description: Allows a staff user to update teacher profile data by Users_ID.
      tags:
        - Admin
      parameters:
        - name: Users_ID
          in: path
          required: true
          description: Users_ID of the teacher to be updated
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                Teacher_Phone:
                  type: string
                  example: "0812345678"
                Teacher_Birthdate:
                  type: string
                  format: date
                  description: Format DD-MM-YYYY
                  example: "12-08-1985"
                Teacher_Religion:
                  type: string
                  example: ""
                Teacher_MedicalProblem:
                  type: string
                  example: ""
              additionalProperties: false
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                Teacher_Phone:
                  type: string
                  example: "0812345678"
                Teacher_Birthdate:
                  type: string
                  format: date
                  description: Format DD-MM-YYYY
                  example: "12-08-1985"
                Teacher_Religion:
                  type: string
                  example: ""
                Teacher_MedicalProblem:
                  type: string
                  example: ""
              additionalProperties: false
      responses:
        '200':
          description: Successfully updated teacher profile
          content:
            application/json:
              example:
                Users_ID: 123
                updated_by: 456
                updated_fields: ["Teacher_Phone", "Teacher_Birthdate"]
                message: "Teacher profile updated successfully."
                status: true

        '400':
          description: Bad Request (invalid input or missing data)
          content:
            application/json:
              example:
                message: "Invalid phone number format."
                status: false

        '403':
          description: Permission Denied
          content:
            application/json:
              example:
                message: "Permission denied. Only staff can perform this action."
                status: false

        '404':
          description: Teacher profile not found or no changes made
          content:
            application/json:
              example:
                message: "Teacher profile not found."
                status: false

        '500':
          description: Server Error
          content:
            application/json:
              example:
                message: "Database error occurred."
                status: false
      security: []

  /api/admin/otherphone/get/{Users_ID}:
    get:
      summary: Get other phone numbers by Users_ID (Admin only)
      description: Retrieve other phone numbers associated with a specific Users_ID. Only accessible by staff users.
      tags:
        - Admin
      parameters:
        - name: Users_ID
          in: path
          required: true
          description: Users_ID of the user whose other phone numbers are requested
          schema:
            type: integer
      responses:
        '200':
          description: Successfully retrieved other phone numbers
          content:
            application/json:
              example:
                data:
                  - OtherPhone_ID: 1
                    Users_ID: 123
                    OtherPhone_Name: ""
                    OtherPhone_Phone: "0812345678"
                  - OtherPhone_ID: 2
                    Users_ID: 123
                    OtherPhone_Name: ""
                    OtherPhone_Phone: "0823456789"
                message: "Other phone numbers retrieved successfully."
                status: true

        '400':
          description: Bad Request (invalid token or Users_ID parameter)
          content:
            application/json:
              example:
                message: "Missing or invalid token information."
                status: false

        '403':
          description: Permission Denied (not staff)
          content:
            application/json:
              example:
                message: "Permission denied. Only staff can perform this action."
                status: false

        '404':
          description: No other phone numbers found for this user
          content:
            application/json:
              example:
                data: []
                message: "No other phone numbers found for this user."
                status: false

        '500':
          description: Server Error
          content:
            application/json:
              example:
                message: "An error occurred on the server."
                status: false
      security: []

  /api/admin/otherphone/get/{Users_ID}:
    get:
      summary: Get other phone numbers by Users_ID (Admin only)
      description: Retrieve other phone numbers associated with a specific Users_ID. Only accessible by staff users.
      tags:
        - Admin
      parameters:
        - name: Users_ID
          in: path
          required: true
          description: Users_ID of the user whose other phone numbers are requested
          schema:
            type: integer
      responses:
        '200':
          description: Successfully retrieved other phone numbers
          content:
            application/json:
              example:
                data:
                  - OtherPhone_ID: 1
                    Users_ID: 123
                    OtherPhone_Name: ""
                    OtherPhone_Phone: "0812345678"
                  - OtherPhone_ID: 2
                    Users_ID: 123
                    OtherPhone_Name: ""
                    OtherPhone_Phone: "0898765432"
                message: Other phone numbers retrieved successfully.
                status: true

        '400':
          description: Bad Request (invalid token or Users_ID parameter)
          content:
            application/json:
              example:
                message: "Missing or invalid Users_ID parameter."
                status: false

        '403':
          description: Permission Denied (not staff)
          content:
            application/json:
              example:
                message: "Permission denied. Only staff can perform this action."
                status: false

        '404':
          description: No other phone numbers found for this user
          content:
            application/json:
              example:
                data: []
                message: "No other phone numbers found for this user."
                status: false

        '500':
          description: Server Error
          content:
            application/json:
              example:
                message: "An error occurred on the server."
                status: false
      security: []

  /api/admin/otherphone/getbyphoneid/{OtherPhone_ID}:
    get:
      summary: Get other phone number by OtherPhone_ID (Admin only)
      description: Retrieve a single other phone number record using OtherPhone_ID. Only accessible by staff users.
      tags:
        - Admin
      parameters:
        - name: OtherPhone_ID
          in: path
          required: true
          description: The ID of the other phone number record to retrieve
          schema:
            type: integer
      responses:
        '200':
          description: Successfully retrieved other phone number
          content:
            application/json:
              example:
                OtherPhone_ID: 2
                Users_ID: 123
                OtherPhone_Name: ""
                OtherPhone_Phone: "0812345678"
                message: "Other phone number retrieved successfully."
                status: true

        '400':
          description: Bad Request (missing or invalid token or OtherPhone_ID)
          content:
            application/json:
              example:
                message: "Invalid OtherPhone_ID parameter."
                status: false

        '403':
          description: Permission denied (not staff or wrong login type)
          content:
            application/json:
              example:
                message: "Permission denied. Only staff can perform this action."
                status: false

        '404':
          description: Other phone number not found or access denied
          content:
            application/json:
              example:
                message: "Other phone number not found or access denied."
                status: false

        '500':
          description: Server error
          content:
            application/json:
              example:
                message: "An error occurred on the server."
                status: false
      security: []

  /api/admin/users/student/add:
    post:
      summary: Register a new student (Admin Website)
      description: This API allows staff users to register new students. Requires authentication token from admin website login. Username is automatically generated from email (part before @).
      tags:
        - Admin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
                - Student_Code
                - Student_FirstName
                - Student_LastName
                - Student_AcademicYear
                - Teacher_ID
                - Department_ID
              properties:
                Users_Email:
                  type: string
                  format: email
                  description: Email address. Username will be automatically generated from part before @
                  example: student01@rmutto.ac.th
                Users_Password:
                  type: string
                  format: password
                  description: Must be at least 8 characters with numbers
                  example: StrongPass123
                Student_Code:
                  type: string
                  description: Must be in format 12 digits followed by - and 1 digit
                  example: 026530461001-6
                Student_FirstName:
                  type: string
                  description: Thai or English letters only, at least 2 characters
                  example: Somchai
                Student_LastName:
                  type: string
                  description: Thai or English letters only, at least 2 characters
                  example: Jaidee
                Student_Phone:
                  type: string
                  description: Thai mobile phone format (optional)
                  example: "0812345678"
                Student_AcademicYear:
                  type: integer
                  description: Academic year. Accepts both Buddhist Era (2567) and Christian Era (2024)
                  example: 2567
                Student_Birthdate:
                  type: string
                  description: Accepts either `YYYY-MM-DD` (Christian Era) or `DD-MM-YYYY` (Buddhist Era). Optional field.
                  example: "21-12-2546"
                Student_Religion:
                  type: string
                  description: Optional field
                  example: Buddhism
                Student_MedicalProblem:
                  type: string
                  description: Optional field
                  example: None
                Teacher_ID:
                  type: integer
                  description: ID of advisor teacher (must exist and not resigned)
                  example: 5
                Department_ID:
                  type: integer
                  description: Department ID (must exist)
                  example: 2
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
                - Student_Code
                - Student_FirstName
                - Student_LastName
                - Student_AcademicYear
                - Teacher_ID
                - Department_ID
              properties:
                Users_Email:
                  type: string
                  format: email
                  description: Email address. Username will be automatically generated from part before @
                  example: student01@rmutto.ac.th
                Users_Password:
                  type: string
                  format: password
                  description: Must be at least 8 characters with numbers
                  example: StrongPass123
                Student_Code:
                  type: string
                  description: Must be in format 12 digits followed by - and 1 digit
                  example: 026530461001-6
                Student_FirstName:
                  type: string
                  description: Thai or English letters only, at least 2 characters
                  example: Somchai
                Student_LastName:
                  type: string
                  description: Thai or English letters only, at least 2 characters
                  example: Jaidee
                Student_Phone:
                  type: string
                  description: Thai mobile phone format (optional)
                  example: "0812345678"
                Student_AcademicYear:
                  type: integer
                  description: Academic year. Accepts both Buddhist Era (2567) and Christian Era (2024)
                  example: 2567
                Student_Birthdate:
                  type: string
                  description: Accepts either `YYYY-MM-DD` (Christian Era) or `DD-MM-YYYY` (Buddhist Era). Optional field.
                  example: "21-12-2546"
                Student_Religion:
                  type: string
                  description: Optional field
                  example: Buddhism
                Student_MedicalProblem:
                  type: string
                  description: Optional field
                  example: None
                Teacher_ID:
                  type: integer
                  description: ID of advisor teacher (must exist and not resigned)
                  example: 5
                Department_ID:
                  type: integer
                  description: Department ID (must exist)
                  example: 2
      responses:
        "201":
          description: Student registered successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Student registered successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      Users_ID:
                        type: integer
                        example: 123
                      Student_ID:
                        type: integer
                        example: 456
                      Student_Code:
                        type: string
                        example: 026530461001-6
                      Student_FirstName:
                        type: string
                        example: Somchai
                      Student_LastName:
                        type: string
                        example: Jaidee
                      Users_Email:
                        type: string
                        example: student01@rmutto.ac.th
                      Users_Username:
                        type: string
                        description: Auto-generated from email
                        example: student01
        "400":
          description: Bad request - invalid or missing fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Email username part (before @) must be 3-20 characters and can contain letters, numbers, and dot (.) only.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "409":
          description: Conflict - duplicate entry
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Email or username already exists.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
    security: []

  /api/admin/users/teacher/add:
    post:
      summary: Register a new teacher (Admin Website)
      description: This API allows staff users to register new teachers. Requires authentication token from admin website login. Username is automatically generated from email (part before @).
      tags:
        - Admin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
                - Teacher_Code
                - Teacher_FirstName
                - Teacher_LastName
                - Department_ID
              properties:
                Users_Email:
                  type: string
                  format: email
                  description: Email address. Username will be automatically generated from part before @
                  example: teacher01@rmutto.ac.th
                Users_Password:
                  type: string
                  format: password
                  description: Must be at least 8 characters with numbers
                  example: StrongPass123
                Teacher_Code:
                  type: string
                  description: Must be in format `026530461001-6` (12 digits + dash + 1 digit). Old format `T123456` no longer supported.
                  example: "026530461001-6"
                Teacher_FirstName:
                  type: string
                  description: Thai or English letters only, at least 2 characters
                  example: Somchai
                Teacher_LastName:
                  type: string
                  description: Thai or English letters only, at least 2 characters
                  example: Jaidee
                Teacher_Phone:
                  type: string
                  description: Thai mobile phone format (optional)
                  example: "0812345678"
                Teacher_Birthdate:
                  type: string
                  description: Accepts either `YYYY-MM-DD` (Christian Era) or `DD-MM-YYYY` (Buddhist Era). Teacher must be at least 20 years old. Optional field.
                  example: "21-12-2525"
                Teacher_Religion:
                  type: string
                  description: Optional field
                  example: Buddhism
                Teacher_MedicalProblem:
                  type: string
                  description: Optional field
                  example: None
                Teacher_IsDean:
                  type: boolean
                  description: Whether this teacher is a dean. Only one dean per faculty allowed.
                  example: false
                Department_ID:
                  type: integer
                  description: Department ID (must exist)
                  example: 3
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
                - Teacher_Code
                - Teacher_FirstName
                - Teacher_LastName
                - Department_ID
              properties:
                Users_Email:
                  type: string
                  format: email
                  description: Email address. Username will be automatically generated from part before @
                  example: teacher01@rmutto.ac.th
                Users_Password:
                  type: string
                  format: password
                  description: Must be at least 8 characters with numbers
                  example: StrongPass123
                Teacher_Code:
                  type: string
                  description: Must be in format `026530461001-6` (12 digits + dash + 1 digit). Old format `T123456` no longer supported.
                  example: "026530461001-6"
                Teacher_FirstName:
                  type: string
                  description: Thai or English letters only, at least 2 characters
                  example: Somchai
                Teacher_LastName:
                  type: string
                  description: Thai or English letters only, at least 2 characters
                  example: Jaidee
                Teacher_Phone:
                  type: string
                  description: Thai mobile phone format (optional)
                  example: "0812345678"
                Teacher_Birthdate:
                  type: string
                  description: Accepts either `YYYY-MM-DD` (Christian Era) or `DD-MM-YYYY` (Buddhist Era). Teacher must be at least 20 years old. Optional field.
                  example: "21-12-2525"
                Teacher_Religion:
                  type: string
                  description: Optional field
                  example: Buddhism
                Teacher_MedicalProblem:
                  type: string
                  description: Optional field
                  example: None
                Teacher_IsDean:
                  type: boolean
                  description: Whether this teacher is a dean. Only one dean per faculty allowed.
                  example: false
                Department_ID:
                  type: integer
                  description: Department ID (must exist)
                  example: 3
      responses:
        "201":
          description: Teacher registered successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Teacher registered successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      Users_ID:
                        type: integer
                        example: 101
                      Teacher_ID:
                        type: integer
                        example: 55
                      Teacher_Code:
                        type: string
                        example: 026530461001-6
                      Teacher_FirstName:
                        type: string
                        example: Somchai
                      Teacher_LastName:
                        type: string
                        example: Jaidee
                      Teacher_IsDean:
                        type: boolean
                        example: false
                      Users_Email:
                        type: string
                        example: teacher01@rmutto.ac.th
                      Users_Username:
                        type: string
                        description: Auto-generated from email
                        example: teacher01
                      Department_ID:
                        type: integer
                        example: 3
        "400":
          description: Bad request - invalid or missing fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: This faculty already has a dean. Please remove the current dean first or set Teacher_IsDean to false.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "409":
          description: Conflict - duplicate entry
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Email or username already exists.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
    security: []

  /api/admin/users/student/import:
    post:
      summary: Import student from CSV data
      description: Import a single student record from CSV with faculty/department names instead of IDs. This endpoint is designed for bulk CSV imports where names are provided instead of database IDs.
      tags:
        - Admin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
                - Student_Code
                - Student_FirstName
                - Student_LastName
                - Student_AcademicYear
                - Faculty_Name
                - Department_Name
                - Teacher_Code
              properties:
                Users_Email:
                  type: string
                  format: email
                  description: Student email address. Username will be auto-generated from part before @
                  example: student.import@rmutto.ac.th
                Users_Password:
                  type: string
                  format: password
                  description: Must be at least 8 characters with numbers
                  example: StrongPass123
                Student_Code:
                  type: string
                  description: Must be in format 12 digits followed by - and 1 digit
                  example: 026530461001-6
                Student_FirstName:
                  type: string
                  description: Thai or English letters only, at least 2 characters
                  example: 
                Student_LastName:
                  type: string
                  description: Thai or English letters only, at least 2 characters
                  example: 
                Student_Phone:
                  type: string
                  description: Thai mobile phone format (optional)
                  example: "0812345678"
                Student_AcademicYear:
                  type: string
                  description: Academic year. Accepts both Buddhist Era and Christian Era
                  example: "2567"
                Student_Birthdate:
                  type: string
                  description: Format dd-mm-yyyy (Buddhist Era) or YYYY-MM-DD (Christian Era). Optional field.
                  example: "21-12-2546"
                Student_Religion:
                  type: string
                  description: Optional field
                  example: 
                Student_MedicalProblem:
                  type: string
                  description: Optional field
                  example: 
                Faculty_Name:
                  type: string
                  description: Exact faculty name as stored in database (required)
                  example: 
                Department_Name:
                  type: string
                  description: Exact department name as stored in database (required)
                  example: 
                Teacher_Code:
                  type: string
                  description: Code of advisor teacher (must exist and not resigned)
                  example: 111111111111-1
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
                - Student_Code
                - Student_FirstName
                - Student_LastName
                - Student_AcademicYear
                - Faculty_Name
                - Department_Name
                - Teacher_Code
              properties:
                Users_Email:
                  type: string
                  format: email
                  example: student.import@rmutto.ac.th
                Users_Password:
                  type: string
                  format: password
                  example: StrongPass123
                Student_Code:
                  type: string
                  example: 026530461001-6
                Student_FirstName:
                  type: string
                  example: 
                Student_LastName:
                  type: string
                  example: 
                Student_Phone:
                  type: string
                  example: "0812345678"
                Student_AcademicYear:
                  type: string
                  example: "2567"
                Student_Birthdate:
                  type: string
                  example: "21-12-2546"
                Student_Religion:
                  type: string
                  example: 
                Student_MedicalProblem:
                  type: string
                  example: 
                Faculty_Name:
                  type: string
                  example: 
                Department_Name:
                  type: string
                  example: 
                Teacher_Code:
                  type: string
                  example: 111111111111-1
      responses:
        "201":
          description: Student imported successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Student imported successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      Users_ID:
                        type: integer
                        example: 123
                      Student_ID:
                        type: integer
                        example: 456
                      Student_Code:
                        type: string
                        example: 026530461001-6
                      Student_FirstName:
                        type: string
                        example: 
                      Student_LastName:
                        type: string
                        example: 
                      Users_Email:
                        type: string
                        example: student.import@rmutto.ac.th
                      Users_Username:
                        type: string
                        description: Auto-generated from email
                        example: student.import
        "400":
          description: Bad request - invalid or missing fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Faculty '' not found.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "409":
          description: Conflict - duplicate entry
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Email or username already exists.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
    security: []

  /api/admin/users/teacher/import:
    post:
      summary: Import teacher from CSV data
      description: Import a single teacher record from CSV with faculty/department names instead of IDs. This endpoint is designed for bulk CSV imports where names are provided instead of database IDs.
      tags:
        - Admin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
                - Teacher_Code
                - Teacher_FirstName
                - Teacher_LastName
                - Faculty_Name
                - Department_Name
              properties:
                Users_Email:
                  type: string
                  format: email
                  description: Teacher email address. Username will be auto-generated from part before @
                  example: teacher.import@rmutto.ac.th
                Users_Password:
                  type: string
                  format: password
                  description: Must be at least 8 characters with numbers
                  example: StrongPass123
                Teacher_Code:
                  type: string
                  description: Must be in format 12 digits followed by - and 1 digit
                  example: 026530461002-7
                Teacher_FirstName:
                  type: string
                  description: Thai or English letters only, at least 2 characters
                  example: 
                Teacher_LastName:
                  type: string
                  description: Thai or English letters only, at least 2 characters
                  example: 
                Teacher_Phone:
                  type: string
                  description: Thai mobile phone format (optional)
                  example: "0812345678"
                Teacher_Birthdate:
                  type: string
                  description: Format dd-mm-yyyy (Buddhist Era) or YYYY-MM-DD (Christian Era). Teacher must be at least 20 years old. Optional field.
                  example: "21-12-2525"
                Teacher_Religion:
                  type: string
                  description: Optional field
                  example: 
                Teacher_MedicalProblem:
                  type: string
                  description: Optional field
                  example: 
                Teacher_IsDean:
                  type: boolean
                  description: Whether this teacher is a dean. Only one dean per faculty allowed.
                  example: false
                Faculty_Name:
                  type: string
                  description: Exact faculty name as stored in database (required)
                  example: 
                Department_Name:
                  type: string
                  description: Exact department name as stored in database (required)
                  example: 
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Users_Email
                - Users_Password
                - Teacher_Code
                - Teacher_FirstName
                - Teacher_LastName
                - Faculty_Name
                - Department_Name
              properties:
                Users_Email:
                  type: string
                  format: email
                  example: teacher.import@rmutto.ac.th
                Users_Password:
                  type: string
                  format: password
                  example: StrongPass123
                Teacher_Code:
                  type: string
                  example: 026530461002-7
                Teacher_FirstName:
                  type: string
                  example: 
                Teacher_LastName:
                  type: string
                  example: 
                Teacher_Phone:
                  type: string
                  example: "0812345678"
                Teacher_Birthdate:
                  type: string
                  example: "21-12-2525"
                Teacher_Religion:
                  type: string
                  example: 
                Teacher_MedicalProblem:
                  type: string
                  example: 
                Teacher_IsDean:
                  type: boolean
                  example: false
                Faculty_Name:
                  type: string
                  example: 
                Department_Name:
                  type: string
                  example: 
      responses:
        "201":
          description: Teacher imported successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Teacher imported successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      Users_ID:
                        type: integer
                        example: 101
                      Teacher_ID:
                        type: integer
                        example: 55
                      Teacher_Code:
                        type: string
                        example: 026530461002-7
                      Teacher_FirstName:
                        type: string
                        example: 
                      Teacher_LastName:
                        type: string
                        example: 
                      Teacher_IsDean:
                        type: boolean
                        example: false
                      Users_Email:
                        type: string
                        example: teacher.import@rmutto.ac.th
                      Users_Username:
                        type: string
                        description: Auto-generated from email
                        example: teacher.import
                      Department_ID:
                        type: integer
                        example: 3
        "400":
          description: Bad request - invalid or missing fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: This faculty already has a dean.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "409":
          description: Conflict - duplicate entry
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Email or username already exists.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
    security: []

  /api/admin/faculties:
    get:
      summary: Get all faculties
      description: Retrieve a list of all faculties in the system
      tags:
        - Admin
      responses:
        "200":
          description: Faculties retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Faculties retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Faculty_ID:
                          type: integer
                          example: 1
                        Faculty_Name:
                          type: string
                          example: 
                  count:
                    type: integer
                    example: 5
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
    security: []

  /api/admin/departments:
    get:
      summary: Get all departments
      description: Retrieve a list of all departments with their faculty information
      tags:
        - Admin
      responses:
        "200":
          description: Departments retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Departments retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Department_ID:
                          type: integer
                          example: 1
                        Department_Name:
                          type: string
                          example: 
                        Faculty_ID:
                          type: integer
                          example: 1
                        Faculty_Name:
                          type: string
                          example: 
                  count:
                    type: integer
                    example: 10
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
    security: []

  /api/admin/faculties/{facultyId}/departments:
    get:
      summary: Get departments by faculty ID
      description: Retrieve all departments that belong to a specific faculty
      tags:
        - Admin
      parameters:
        - name: facultyId
          in: path
          required: true
          description: Faculty ID
          schema:
            type: integer
            example: 1
      responses:
        "200":
          description: Departments retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Departments retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  faculty:
                    type: object
                    properties:
                      Faculty_ID:
                        type: integer
                        example: 1
                      Faculty_Name:
                        type: string
                        example: 
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Department_ID:
                          type: integer
                          example: 1
                        Department_Name:
                          type: string
                          example: 
                        Faculty_ID:
                          type: integer
                          example: 1
                  count:
                    type: integer
                    example: 3
        "400":
          description: Invalid Faculty ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid Faculty ID.
                  status:
                    type: boolean
                    example: false
        "404":
          description: Faculty not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Faculty not found.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
    security: []

  /api/admin/departments/{departmentId}/teachers:
    get:
      summary: Get teachers by department ID
      description: Retrieve all active teachers that belong to a specific department
      tags:
        - Admin
      parameters:
        - name: departmentId
          in: path
          required: true
          description: Department ID
          schema:
            type: integer
            example: 1
      responses:
        "200":
          description: Teachers retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Teachers retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  department:
                    type: object
                    properties:
                      Department_ID:
                        type: integer
                        example: 1
                      Department_Name:
                        type: string
                        example: 
                      Faculty_ID:
                        type: integer
                        example: 1
                      Faculty_Name:
                        type: string
                        example: 
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Teacher_ID:
                          type: integer
                          example: 1
                        Teacher_Code:
                          type: string
                          example: 111111111111-1
                        Teacher_FirstName:
                          type: string
                          example: Teacher
                        Teacher_LastName:
                          type: string
                          example: Admin
                        Teacher_FullName:
                          type: string
                          example: Teacher Admin
                        Teacher_Phone:
                          type: string
                          example: "0812345678"
                        Teacher_Birthdate:
                          type: string
                          format: date
                          example: "1980-01-15"
                        Teacher_Religion:
                          type: string
                          example: Buddhism
                        Teacher_MedicalProblem:
                          type: string
                          example: None
                        Teacher_RegisTime:
                          type: string
                          format: date-time
                          example: "2024-01-01T10:00:00.000Z"
                        Teacher_IsDean:
                          type: boolean
                          example: false
                        Teacher_IsResign:
                          type: boolean
                          example: false
                        Department_ID:
                          type: integer
                          example: 1
                        Users:
                          type: object
                          properties:
                            Users_ID:
                              type: integer
                              example: 1
                            Users_Email:
                              type: string
                              example: teacher.admin@rmutto.ac.th
                            Users_Username:
                              type: string
                              example: teacher.admin
                            Users_RegisTime:
                              type: string
                              format: date-time
                              example: "2024-01-01T10:00:00.000Z"
                            Users_ImageFile:
                              type: string
                              example: null
                            Users_IsActive:
                              type: boolean
                              example: true
                  count:
                    type: integer
                    example: 5
        "400":
          description: Invalid Department ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid Department ID.
                  status:
                    type: boolean
                    example: false
        "404":
          description: Department not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Department not found.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
    security: []

  /api/admin/departments/{departmentId}/stats:
    get:
      summary: Get department statistics by ID
      description: Retrieve statistics (teachers and students count) for a specific department
      tags:
        - Admin
      parameters:
        - name: departmentId
          in: path
          required: true
          description: ID of the department
          schema:
            type: integer
            example: 2
      responses:
        "200":
          description: Department statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Department statistics retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  department:
                    type: object
                    properties:
                      Department_ID:
                        type: integer
                        example: 2
                      Department_Name:
                        type: string
                        example: Department of Computer Science
                      Faculty_ID:
                        type: integer
                        example: 1
                      Faculty_Name:
                        type: string
                        example: Faculty of Information Technology
                  data:
                    type: object
                    properties:
                      teacher_count:
                        type: integer
                        example: 15
                      student_count:
                        type: integer
                        example: 200
                      total_personnel:
                        type: integer
                        example: 215
                      teacher_ratio:
                        type: string
                        example: "6.5"
                      student_ratio:
                        type: string
                        example: "93.5"
        "400":
          description: Invalid Department ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid Department ID.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff and teachers can perform this action.
                  status:
                    type: boolean
                    example: false
        "404":
          description: Department not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Department not found.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
      security: []

  /api/admin/departments/stats/all:
    get:
      summary: Get statistics of all departments
      description: Retrieve statistics (teachers, students, and summary) for all departments
      tags:
        - Admin
      responses:
        "200":
          description: All departments statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: All departments statistics retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Department_ID:
                          type: integer
                          example: 2
                        Department_Name:
                          type: string
                          example: Department of Computer Science
                        Faculty_ID:
                          type: integer
                          example: 1
                        Faculty_Name:
                          type: string
                          example: Faculty of Information Technology
                        teacher_count:
                          type: integer
                          example: 15
                        student_count:
                          type: integer
                          example: 200
                        total_personnel:
                          type: integer
                          example: 215
                        teacher_ratio:
                          type: string
                          example: "6.5"
                        student_ratio:
                          type: string
                          example: "93.5"
                  summary:
                    type: object
                    properties:
                      total_departments:
                        type: integer
                        example: 10
                      total_teachers:
                        type: integer
                        example: 120
                      total_students:
                        type: integer
                        example: 2500
                      total_personnel:
                        type: integer
                        example: 2620
                      faculties_count:
                        type: integer
                        example: 5
                      avg_teachers_per_dept:
                        type: string
                        example: "12.0"
                      avg_students_per_dept:
                        type: string
                        example: "250.0"
                      teacher_student_ratio:
                        type: string
                        example: "1:21"
                  count:
                    type: integer
                    example: 10
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff and teachers can perform this action.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
      security: []

  /api/admin/teachers:
    get:
      summary: Get all teachers with pagination and filtering
      description: Retrieve a paginated list of teachers with optional filtering and search capabilities
      tags:
        - Admin
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default: 1)
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default: 20)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 20
        - name: includeResigned
          in: query
          required: false
          description: Include resigned teachers (default: false)
          schema:
            type: boolean
            default: false
            example: false
        - name: departmentId
          in: query
          required: false
          description: Filter by department ID
          schema:
            type: integer
            example: 1
        - name: search
          in: query
          required: false
          description: Search in teacher names, codes, or emails
          schema:
            type: string
            example: Teacher
      responses:
        "200":
          description: Teachers retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Teachers retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Teacher_ID:
                          type: integer
                          example: 1
                        Teacher_Code:
                          type: string
                          example: 111111111111-1
                        Teacher_FirstName:
                          type: string
                          example: Teacher
                        Teacher_LastName:
                          type: string
                          example: Admin
                        Teacher_FullName:
                          type: string
                          example: Teacher Admin
                        Teacher_Phone:
                          type: string
                          example: "0812345678"
                        Teacher_Birthdate:
                          type: string
                          format: date
                          example: "1980-01-15"
                        Teacher_Religion:
                          type: string
                          example: Buddhism
                        Teacher_MedicalProblem:
                          type: string
                          example: None
                        Teacher_RegisTime:
                          type: string
                          format: date-time
                          example: "2024-01-01T10:00:00.000Z"
                        Teacher_IsDean:
                          type: boolean
                          example: false
                        Teacher_IsResign:
                          type: boolean
                          example: false
                        Department:
                          type: object
                          properties:
                            Department_ID:
                              type: integer
                              example: 1
                            Department_Name:
                              type: string
                              example: 
                            Faculty_ID:
                              type: integer
                              example: 1
                            Faculty_Name:
                              type: string
                              example: 
                        Users:
                          type: object
                          properties:
                            Users_ID:
                              type: integer
                              example: 1
                            Users_Email:
                              type: string
                              example: teacher.admin@rmutto.ac.th
                            Users_Username:
                              type: string
                              example: teacher.admin
                            Users_RegisTime:
                              type: string
                              format: date-time
                              example: "2024-01-01T10:00:00.000Z"
                            Users_ImageFile:
                              type: string
                              example: null
                            Users_IsActive:
                              type: boolean
                              example: true
                  pagination:
                    type: object
                    properties:
                      current_page:
                        type: integer
                        example: 1
                      total_pages:
                        type: integer
                        example: 5
                      per_page:
                        type: integer
                        example: 20
                      total_items:
                        type: integer
                        example: 95
                      has_next:
                        type: boolean
                        example: true
                      has_prev:
                        type: boolean
                        example: false
                  count:
                    type: integer
                    example: 20
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
    security: []

  /api/admin/teachers/{id}:
    get:
      summary: Get teacher detail by ID (Admin/Staff/Teacher - Website only)
      description: Retrieve detailed information of a teacher by teacher ID, including user and department data.
      tags:
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          description: Teacher ID
          schema:
            type: integer
            example: 1
      responses:
        "200":
          description: Teacher details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Teacher details retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      email:
                        type: string
                        example: teacher.admin@rmutto.ac.th
                      username:
                        type: string
                        example: teacher.admin
                      userType:
                        type: string
                        example: teacher
                      isActive:
                        type: boolean
                        example: true
                      regisTime:
                        type: string
                        format: date-time
                        example: "2024-01-01T10:00:00.000Z"
                      imageFile:
                        type: string
                        example: profile1.png
                      teacher:
                        type: object
                        properties:
                          code:
                            type: string
                            example: TCH001
                          firstName:
                            type: string
                            example: John
                          lastName:
                            type: string
                            example: Doe
                          phone:
                            type: string
                            example: "0812345678"
                          otherPhones:
                            type: array
                            items:
                              type: object
                              properties:
                                name:
                                  type: string
                                  example: Emergency Contact
                                phone:
                                  type: string
                                  example: "0899999999"
                          birthdate:
                            type: string
                            format: date
                            example: "1980-01-15"
                          religion:
                            type: string
                            example: Buddhism
                          medicalProblem:
                            type: string
                            example: None
                          department:
                            type: string
                            example: Computer Science
                          faculty:
                            type: string
                            example: Business and IT
                          isDean:
                            type: boolean
                            example: false
                          isResigned:
                            type: boolean
                            example: false
                          regisTime:
                            type: string
                            format: date-time
                            example: "2024-01-01T10:00:00.000Z"
                      department:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          name:
                            type: string
                            example: Computer Science
                          faculty:
                            type: object
                            properties:
                              id:
                                type: integer
                                example: 2
                              name:
                                type: string
                                example: Business and IT
        "400":
          description: Invalid teacher ID provided
        "403":
          description: Permission denied
        "404":
          description: Teacher not found
        "500":
          description: Internal server error
      security: []

    put:
      summary: Update teacher details by ID (Admin only)
      description: Update teacher information such as name, phone, birthdate, religion, medical issues, and additional phone numbers.
      tags:
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          description: Teacher ID
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                teacher:
                  type: object
                  required:
                    - firstName
                    - lastName
                  properties:
                    code:
                      type: string
                      example: TCH001
                    firstName:
                      type: string
                      example: John
                    lastName:
                      type: string
                      example: Doe
                    phone:
                      type: string
                      example: "0812345678"
                    otherPhones:
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                            example: Emergency Contact
                          phone:
                            type: string
                            example: "0899999999"
                    birthdate:
                      type: string
                      format: date
                      example: "1980-01-15"
                    religion:
                      type: string
                      example: Buddhism
                    medicalProblem:
                      type: string
                      example: Asthma
                    isDean:
                      type: boolean
                      example: false
                    isResigned:
                      type: boolean
                      example: false
      responses:
        "200":
          description: Teacher details updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Teacher details updated successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      teacherId:
                        type: integer
                        example: 1
                      updated:
                        type: boolean
                        example: true
        "400":
          description: Invalid request or missing required fields
        "403":
          description: Permission denied
        "404":
          description: Teacher not found
        "500":
          description: Internal server error
      security: []

  /api/admin/teachers/{id}:
    put:
      summary: Update teacher details by ID
      description: Update detailed information about a teacher (only staff on website login).
      tags:
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          description: Teacher ID
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                teacher:
                  type: object
                  required:
                    - firstName
                    - lastName
                  properties:
                    code:
                      type: string
                      example: T12345
                    firstName:
                      type: string
                      example: John
                    lastName:
                      type: string
                      example: Doe
                    phone:
                      type: string
                      example: "0812345678"
                    otherPhones:
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                            example: Emergency
                          phone:
                            type: string
                            example: "0998765432"
                    birthdate:
                      type: string
                      format: date
                      example: "1980-01-15"
                    religion:
                      type: string
                      example: Buddhism
                    medicalProblem:
                      type: string
                      example: Asthma
                    isDean:
                      type: boolean
                      example: false
                    isResigned:
                      type: boolean
                      example: false
      responses:
        "200":
          description: Teacher details updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Teacher details updated successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      teacherId:
                        type: integer
                        example: 1
                      updated:
                        type: boolean
                        example: true
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-09-26T10:00:00.000Z"
        "400":
          description: Invalid input
        "401":
          description: Authentication required
        "403":
          description: Permission denied
        "404":
          description: Teacher not found
        "500":
          description: Internal server error
      security: []

  /api/admin/teachers/{teacherId}:
    get:
      summary: Get teacher details by ID
      description: Retrieve detailed information about a teacher (staff, teacher, or admin).
      tags:
        - Admin
      parameters:
        - name: teacherId
          in: path
          required: true
          description: Teacher ID
          schema:
            type: integer
            example: 1
      responses:
        "200":
          description: Teacher retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Teacher retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      Teacher_ID:
                        type: integer
                        example: 1
                      Teacher_Code:
                        type: string
                        example: T12345
                      Teacher_Name:
                        type: string
                        example: John Doe
                      Teacher_FirstName:
                        type: string
                        example: John
                      Teacher_LastName:
                        type: string
                        example: Doe
                      Department_Name:
                        type: string
                        example: Computer Science
                      Faculty_Name:
                        type: string
                        example: Business and IT
                      Display_Name:
                        type: string
                        example: John Doe (Computer Science)
                      isResigned:
                        type: boolean
                        example: false
        "400":
          description: Invalid teacher ID
        "403":
          description: Permission denied
        "404":
          description: Teacher not found
        "500":
          description: Internal server error
      security: []

  /api/admin/teacher-advisors:
    get:
      summary: Get all teachers for advisor dropdown
      description: Retrieve a list of teachers available for student assignment (staff or teacher login required).
      tags:
        - Admin
      responses:
        "200":
          description: Teachers retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Teachers retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Teacher_ID:
                          type: integer
                          example: 1
                        Teacher_Code:
                          type: string
                          example: T12345
                        Teacher_Name:
                          type: string
                          example: John Doe
                        Teacher_FirstName:
                          type: string
                          example: John
                        Teacher_LastName:
                          type: string
                          example: Doe
                        Department_Name:
                          type: string
                          example: Computer Science
                        Faculty_Name:
                          type: string
                          example: Business and IT
                        Display_Name:
                          type: string
                          example: John Doe (Computer Science)
                  count:
                    type: integer
                    example: 10
                  debug:
                    type: object
                    properties:
                      endpoint:
                        type: string
                        example: teacher-advisors
                      user_type:
                        type: string
                        example: staff
                      query_time:
                        type: string
                        format: date-time
                        example: "2025-09-26T10:00:00.000Z"
      security: []

  /api/admin/students/{id}/assignment:
    put:
      summary: Update student's department, faculty, and advisor
      description: Change student's assignment to a new department and advisor (staff, admin, or teacher required).
      tags:
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          description: Student ID
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Department_ID
                - Teacher_ID
              properties:
                Department_ID:
                  type: integer
                  example: 2
                Teacher_ID:
                  type: integer
                  example: 5
      responses:
        "200":
          description: Student assignment updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Student assignment updated successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      studentId:
                        type: integer
                        example: 1
                      Department_ID:
                        type: integer
                        example: 2
                      Teacher_ID:
                        type: integer
                        example: 5
                      updated:
                        type: boolean
                        example: true
        "400":
          description: Invalid input
        "401":
          description: Authentication required
        "403":
          description: Permission denied
        "404":
          description: Student not found
        "500":
          description: Internal server error
      security: []

  /api/admin/teachers/{id}/status:
    patch:
      summary: Update teacher account status (Active/Inactive) (Admin only)
      description: Change teacher account status between active and inactive.
      tags:
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          description: Teacher ID
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isActive:
                  type: boolean
                  example: true
      responses:
        "200":
          description: Teacher status updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Teacher status updated successfully to active.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      teacherId:
                        type: integer
                        example: 1
                      isActive:
                        type: boolean
                        example: true
                      updatedBy:
                        type: string
                        example: staff.admin
                      updatedAt:
                        type: string
                        format: date-time
                        example: "2024-01-02T14:00:00.000Z"
        "400":
          description: Invalid teacher ID or status value
        "403":
          description: Permission denied
        "404":
          description: Teacher not found
        "500":
          description: Internal server error
      security: []

  /api/admin/teachers/{id}/basic:
    get:
      summary: Get teacher basic info by ID (Admin/Teacher - Website only)
      description: Retrieve basic information of a teacher by ID, including department and faculty.
      tags:
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          description: Teacher ID
          schema:
            type: integer
            example: 1
      responses:
        "200":
          description: Teacher basic information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Teacher basic information retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      code:
                        type: string
                        example: TCH001
                      firstName:
                        type: string
                        example: John
                      lastName:
                        type: string
                        example: Doe
                      fullName:
                        type: string
                        example: John Doe
                      email:
                        type: string
                        example: teacher.admin@rmutto.ac.th
                      department:
                        type: string
                        example: Computer Science
                      faculty:
                        type: string
                        example: Business and IT
                      isActive:
                        type: boolean
                        example: true
                      isDean:
                        type: boolean
                        example: false
                      isResigned:
                        type: boolean
                        example: false
                      userType:
                        type: string
                        example: teacher
        "400":
          description: Invalid teacher ID
        "403":
          description: Permission denied
        "404":
          description: Teacher not found
        "500":
          description: Internal server error
      security: []

  /api/admin/students:
    get:
      summary: Get all students with pagination, filtering, and search
      description: Retrieve a paginated list of students with optional filtering and search capabilities (only for staff or teacher on website login)
      tags:
        - Admin
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (default: 1)
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - name: limit
          in: query
          required: false
          description: Number of items per page (default: 20)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 20
        - name: includeGraduated
          in: query
          required: false
          description: Include graduated students (default: false)
          schema:
            type: boolean
            default: false
            example: false
        - name: departmentId
          in: query
          required: false
          description: Filter by department ID
          schema:
            type: integer
            example: 2
        - name: facultyId
          in: query
          required: false
          description: Filter by faculty ID
          schema:
            type: integer
            example: 1
        - name: academicYear
          in: query
          required: false
          description: Filter by academic year
          schema:
            type: integer
            example: 2024
        - name: search
          in: query
          required: false
          description: Search in student names, codes, or emails
          schema:
            type: string
            example: John
      responses:
        "200":
          description: Students retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Students retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Student_ID:
                          type: integer
                          example: 1
                        Student_Code:
                          type: string
                          example: "66011223344"
                        Student_FirstName:
                          type: string
                          example: John
                        Student_LastName:
                          type: string
                          example: Doe
                        Student_FullName:
                          type: string
                          example: John Doe
                        Student_Phone:
                          type: string
                          example: "0812345678"
                        Student_AcademicYear:
                          type: integer
                          example: 2024
                        Student_Birthdate:
                          type: string
                          format: date
                          example: "2002-05-15"
                        Student_Religion:
                          type: string
                          example: Buddhism
                        Student_MedicalProblem:
                          type: string
                          example: Asthma
                        Student_RegisTime:
                          type: string
                          format: date-time
                          example: "2024-01-01T10:00:00.000Z"
                        Student_IsGraduated:
                          type: boolean
                          example: false
                        Department:
                          type: object
                          properties:
                            Department_ID:
                              type: integer
                              example: 2
                            Department_Name:
                              type: string
                              example: 
                            Faculty_ID:
                              type: integer
                              example: 1
                            Faculty_Name:
                              type: string
                              example: 
                        Users:
                          type: object
                          properties:
                            Users_ID:
                              type: integer
                              example: 1
                            Users_Email:
                              type: string
                              example: john.doe@student.rmutto.ac.th
                            Users_Username:
                              type: string
                              example: john.doe
                            Users_RegisTime:
                              type: string
                              format: date-time
                              example: "2024-01-01T10:00:00.000Z"
                            Users_ImageFile:
                              type: string
                              example: null
                            Users_IsActive:
                              type: boolean
                              example: true
                  pagination:
                    type: object
                    properties:
                      current_page:
                        type: integer
                        example: 1
                      total_pages:
                        type: integer
                        example: 5
                      per_page:
                        type: integer
                        example: 20
                      total_items:
                        type: integer
                        example: 95
                      has_next:
                        type: boolean
                        example: true
                      has_prev:
                        type: boolean
                        example: false
                  count:
                    type: integer
                    example: 20
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
      security: []

  /api/admin/students/{id}:
    get:
      summary: Get student details by ID
      description: Retrieve detailed information about a student (only staff or teacher on website login).
      tags:
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          description: Student ID
          schema:
            type: integer
            example: 1
      responses:
        "200":
          description: Student details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Student details retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      email:
                        type: string
                        example: john.doe@student.rmutto.ac.th
                      username:
                        type: string
                        example: john.doe
                      userType:
                        type: string
                        example: student
                      Users_ID:
                        type: integer
                        example: 101
                      isActive:
                        type: boolean
                        example: true
                      regisTime:
                        type: string
                        format: date-time
                        example: "2024-01-01T10:00:00.000Z"
                      imageFile:
                        type: string
                        example: null
                      student:
                        type: object
                        properties:
                          code:
                            type: string
                            example: 66011223344
                          firstName:
                            type: string
                            example: John
                          lastName:
                            type: string
                            example: Doe
                          phone:
                            type: string
                            example: "0812345678"
                          otherPhones:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                  example: 1
                                name:
                                  type: string
                                  example: Emergency
                                phone:
                                  type: string
                                  example: "0998765432"
                          academicYear:
                            type: integer
                            example: 2024
                          birthdate:
                            type: string
                            format: date
                            example: "2002-05-15"
                          religion:
                            type: string
                            example: Buddhism
                          medicalProblem:
                            type: string
                            example: Asthma
                          department:
                            type: string
                            example: Computer Science
                          faculty:
                            type: string
                            example: Business and IT
                          advisor:
                            type: string
                            example: Dr. Smith Johnson
                          isGraduated:
                            type: boolean
                            example: false
                          regisTime:
                            type: string
                            format: date-time
                            example: "2024-01-01T10:00:00.000Z"
                      department:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 2
                          name:
                            type: string
                            example: Computer Science
                          faculty:
                            type: object
                            properties:
                              id:
                                type: integer
                                example: 1
                              name:
                                type: string
                                example: Business and IT
        "400":
          description: Invalid student ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid student ID provided.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff and teachers can perform this action.
                  status:
                    type: boolean
                    example: false
        "404":
          description: Student not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Student not found.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An unexpected error occurred while fetching student details.
                  status:
                    type: boolean
                    example: false
      security: []

    put:
      summary: Update student details by ID
      description: Update detailed information about a student (only staff or teacher on website login).
      tags:
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          description: Student ID
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - student
              properties:
                student:
                  type: object
                  required:
                    - firstName
                    - lastName
                  properties:
                    code:
                      type: string
                      example: 66011223344
                    firstName:
                      type: string
                      example: John
                    lastName:
                      type: string
                      example: Doe
                    phone:
                      type: string
                      example: "0812345678"
                    otherPhones:
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                            example: Emergency
                          phone:
                            type: string
                            example: "0998765432"
                    academicYear:
                      type: integer
                      example: 2024
                    birthdate:
                      type: string
                      format: date
                      example: "2002-05-15"
                    religion:
                      type: string
                      example: Buddhism
                    medicalProblem:
                      type: string
                      example: Asthma
                    isGraduated:
                      type: boolean
                      example: false
      responses:
        "200":
          description: Student details updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Student details updated successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      studentId:
                        type: integer
                        example: 1
                      updated:
                        type: boolean
                        example: true
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-09-26T10:00:00.000Z"
        "400":
          description: Invalid input (e.g. missing names, invalid student ID, missing student data)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid student ID provided.
                  status:
                    type: boolean
                    example: false
        "401":
          description: Authentication required
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Authentication required.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied (only staff or teacher on website login)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff or teacher can perform this action.
                  status:
                    type: boolean
                    example: false
        "404":
          description: Student not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Student not found.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An unexpected error occurred while updating student details.
                  status:
                    type: boolean
                    example: false
      security: []

  /api/admin/students/{id}/basic:
    get:
      summary: Get basic student information by ID
      description: Retrieve basic student information (only staff or teacher on website login).
      tags:
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          description: Student ID
          schema:
            type: integer
            example: 1
      responses:
        "200":
          description: Student basic information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Student basic information retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      code:
                        type: string
                        example: 66011223344
                      firstName:
                        type: string
                        example: John
                      lastName:
                        type: string
                        example: Doe
                      fullName:
                        type: string
                        example: John Doe
                      email:
                        type: string
                        example: john.doe@student.rmutto.ac.th
                      department:
                        type: string
                        example: Computer Science
                      faculty:
                        type: string
                        example: Business and IT
                      isActive:
                        type: boolean
                        example: true
                      isGraduated:
                        type: boolean
                        example: false
                      userType:
                        type: string
                        example: student
        "400":
          description: Invalid student ID
        "403":
          description: Permission denied
        "404":
          description: Student not found
        "500":
          description: Internal server error
      security: []

  /api/admin/users/{Users_ID}/change-password:
    put:
      summary: Change user password by ID (Admin Website)
      description: Staff can change password of any user in the system
      tags:
        - Admin
      parameters:
        - name: Users_ID
          in: path
          required: true
          description: ID of the target user
          schema:
            type: integer
            example: 5
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                newPassword:
                  type: string
                  example: "NewPass123"
      responses:
        "200":
          description: Password changed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Password changed successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      Users_ID:
                        type: integer
                        example: 5
                      changedBy:
                        type: integer
                        example: 1
                      changedAt:
                        type: string
                        format: date-time
                        example: 2025-09-26T08:12:34.000Z
        "400":
          description: Invalid request or missing parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: New password is required.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can change user passwords.
                  status:
                    type: boolean
                    example: false
        "404":
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User not found.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error occurred.
                  status:
                    type: boolean
                    example: false
      security: []

  /api/admin/staff:
    get:
      summary: Get all staff with optional search and filter
      description: Retrieve list of staff with pagination, filtering, and search
      tags:
        - Admin
      parameters:
        - name: includeResigned
          in: query
          required: false
          schema:
            type: boolean
          description: Include resigned staff if true
          example: false
        - name: search
          in: query
          required: false
          schema:
            type: string
          description: Search by first name, last name, staff code, or email
          example: "Somchai"
      responses:
        "200":
          description: Staff retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Staff retrieved successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        Staff_ID:
                          type: integer
                          example: 10
                        Staff_Code:
                          type: string
                          example: ST001
                        Staff_FirstName:
                          type: string
                          example: Somchai
                        Staff_LastName:
                          type: string
                          example: Jaidee
                        Staff_FullName:
                          type: string
                          example: Somchai Jaidee
                        Staff_Phone:
                          type: string
                          example: "0812345678"
                        Staff_IsResign:
                          type: boolean
                          example: false
                        Users:
                          type: object
                          properties:
                            Users_ID:
                              type: integer
                              example: 2
                            Users_Email:
                              type: string
                              example: somchai@example.com
                            Users_Username:
                              type: string
                              example: somchai
                            Users_RegisTime:
                              type: string
                              format: date-time
                              example: 2025-01-01T08:12:34.000Z
                            Users_ImageFile:
                              type: string
                              example: profile123.png
                            Users_IsActive:
                              type: boolean
                              example: true
                  count:
                    type: integer
                    example: 25
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error
                  status:
                    type: boolean
                    example: false
      security: []

  /api/admin/staff/{id}:
    put:
      summary: Update staff details by ID
      description: Staff can update staff details (including phone numbers)
      tags:
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 10
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                staff:
                  type: object
                  properties:
                    code:
                      type: string
                      example: ST002
                    firstName:
                      type: string
                      example: Anucha
                    lastName:
                      type: string
                      example: Saelim
                    phone:
                      type: string
                      example: "0891112233"
                    otherPhones:
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                            example: "Home"
                          phone:
                            type: string
                            example: "023456789"
                    isResigned:
                      type: boolean
                      example: false
      responses:
        "200":
          description: Staff updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Staff details updated successfully.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      staffId:
                        type: integer
                        example: 10
                      updated:
                        type: boolean
                        example: true
        "400":
          description: Invalid staff ID or data
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: First name and last name are required.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can perform this action.
                  status:
                    type: boolean
                    example: false
        "404":
          description: Staff not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Staff not found.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error while updating staff.
                  status:
                    type: boolean
                    example: false
      security: []

  /api/admin/staff/{id}/status:
    patch:
      summary: Update staff status (active/inactive) by ID
      description: Staff can activate or deactivate staff account
      tags:
        - Admin
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            example: 10
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isActive:
                  type: boolean
                  example: true
      responses:
        "200":
          description: Staff status updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Staff status updated successfully to active.
                  status:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      staffId:
                        type: integer
                        example: 10
                      isActive:
                        type: boolean
                        example: true
                      updatedBy:
                        type: string
                        example: admin@example.com
                      updatedAt:
                        type: string
                        format: date-time
                        example: 2025-09-26T08:12:34.000Z
        "400":
          description: Invalid staff ID or status
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid status value. Must be true or false.
                  status:
                    type: boolean
                    example: false
        "403":
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only staff can change user status.
                  status:
                    type: boolean
                    example: false
        "404":
          description: Staff not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Staff not found.
                  status:
                    type: boolean
                    example: false
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error while updating status.
                  status:
                    type: boolean
                    example: false
      security: []

  /api/profile/student/update:
    put:
      tags:
        - Profile
      summary: Update student profile
      description: Updates partial student profile. Requires authentication via Bearer token. Only accessible by users with type "student".
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                Student_Phone:
                  type: string
                  example: "0812345678"
                  description: Phone number in format 0XXXXXXXXX
                Student_Birthdate:
                  type: string
                  example: "21-12-2003"
                  description: Date of birth in format DD-MM-YYYY
                Student_Religion:
                  type: string
                  maxLength: 63
                  example: ""
                Student_MedicalProblem:
                  type: string
                  maxLength: 511
                  example: ""
              additionalProperties: false
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                Student_Phone:
                  type: string
                  example: "0812345678"
                  description: Phone number in format 0XXXXXXXXX
                Student_Birthdate:
                  type: string
                  example: "21-12-2003"
                  description: Date of birth in format DD-MM-YYYY
                Student_Religion:
                  type: string
                  maxLength: 63
                  example: ""
                Student_MedicalProblem:
                  type: string
                  maxLength: 511
                  example: ""
              additionalProperties: false
      responses:
        '200':
          description: Successfully updated student profile
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Student profile updated successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid input (e.g. wrong date format or too long fields)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid birthdate format. Use DD-MM-YYYY.
                  status:
                    type: boolean
                    example: false
        '403':
          description: Forbidden - user is not a student
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only students can perform this action.
                  status:
                    type: boolean
                    example: false
        '404':
          description: No changes made or student not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No changes made or student not found.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server/database error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error occurred.
                  status:
                    type: boolean
                    example: false

  /api/profile/teacher/update:
    put:
      tags:
        - Profile
      summary: Update teacher profile
      description: Updates partial teacher profile. Requires authentication via Bearer token. Only accessible by users with type "teacher".
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                Teacher_Phone:
                  type: string
                  example: "0812345678"
                  description: Phone number in format 0XXXXXXXXX
                Teacher_Birthdate:
                  type: string
                  example: "21-12-2003"
                  description: Date of birth in format DD-MM-YYYY
                Teacher_Religion:
                  type: string
                  maxLength: 63
                  example: ""
                Teacher_MedicalProblem:
                  type: string
                  maxLength: 511
                  example: ""
              additionalProperties: false
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                Teacher_Phone:
                  type: string
                  example: "0812345678"
                  description: Phone number in format 0XXXXXXXXX
                Teacher_Birthdate:
                  type: string
                  example: "21-12-2003"
                  description: Date of birth in format DD-MM-YYYY
                Teacher_Religion:
                  type: string
                  maxLength: 63
                  example: ""
                Teacher_MedicalProblem:
                  type: string
                  maxLength: 511
                  example: ""
              additionalProperties: false
      responses:
        '200':
          description: Successfully updated Teacher profile
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Student profile updated successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid input (e.g. wrong date format or too long fields)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid birthdate format. Use DD-MM-YYYY.
                  status:
                    type: boolean
                    example: false
        '403':
          description: Forbidden - user is not a Teacher
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Permission denied. Only Teacher can perform this action.
                  status:
                    type: boolean
                    example: false
        '404':
          description: No changes made or Teacher not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No changes made or Teacher not found.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server/database error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Database error occurred.
                  status:
                    type: boolean
                    example: false

  /api/profile/upload/image:
    post:
      summary: Upload profile image
      description: Upload a profile image for the logged-in user. Accepts JPEG or PNG, resizes and converts to JPG before saving.
      tags:
        - Profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                Users_ImageFile:
                  type: string
                  format: binary
              required:
                - Users_ImageFile
      responses:
        '200':
          description: Profile image uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Profile image uploaded successfully.
                  filename:
                    type: string
                    example: a2f3c1e7-1234-4567-8910-image.jpg
        '400':
          description: Bad request Missing or invalid image or token
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Please provide an image file.
                  status:
                    type: boolean
                    example: false
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User not found.
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error occurred during image upload.

  /api/profile/otherphone/add:
    post:
      summary: Add an additional phone number for the user
      tags:
        - Profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - OtherPhone_Phone
                - OtherPhone_Name
              properties:
                OtherPhone_Phone:
                  type: string
                  description: Additional phone number (digits only, length between 8 and 20)
                  example: "0812345678"
                OtherPhone_Name:
                  type: string
                  description: Name or label for the additional phone number
                  example: "Work Phone"
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - OtherPhone_Phone
                - OtherPhone_Name
              properties:
                OtherPhone_Phone:
                  type: string
                  description: Additional phone number (digits only, length between 8 and 20)
                  example: "0812345678"
                OtherPhone_Name:
                  type: string
                  description: Name or label for the additional phone number
                  example: "Work Phone"
      responses:
        '200':
          description: Successfully added additional phone number
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Other phone number added successfully."
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid input parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Please fill in the correct parameters as required."
                  status:
                    type: boolean
                    example: false
        '403':
          description: Permission denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Permission denied. This action is only allowed in the application."
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Server error while checking phone count."
                  status:
                    type: boolean
                    example: false

  /api/profile/otherphone/delete/{OtherPhone_ID}:
    delete:
      tags:
        - Profile
      summary: Delete an additional phone number
      description: Delete an additional phone number associated with the authenticated user.
      security:
        - bearerAuth: []
      parameters:
        - name: OtherPhone_ID
          in: path
          required: true
          description: ID of the phone number to be deleted
          schema:
            type: integer
            example: 3
      responses:
        '200':
          description: Phone number deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Other phone number deleted successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid phone ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid OtherPhone_ID.
                  status:
                    type: boolean
                    example: false
        '403':
          description: Unauthorized deletion attempt
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: You do not have permission to delete this phone number.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server-side error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Error deleting phone number.
                  status:
                    type: boolean
                    example: false

  /api/profile/otherphone/edit/{OtherPhone_ID}:
    put:
      summary: Edit an additional phone number of the user
      tags:
        - Profile
      description: Edit an additional phone number associated with the authenticated user.
      security:
        - bearerAuth: []
      parameters:
        - name: OtherPhone_ID
          in: path
          description: ID of the other phone number to edit
          required: true
          schema:
            type: integer
            example: 123
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - OtherPhone_Name
                - OtherPhone_Phone
              properties:
                OtherPhone_Name:
                  type: string
                  description: Name or label for the additional phone number
                  example: "Work Phone"
                OtherPhone_Phone:
                  type: string
                  description: Additional phone number (digits only, length between 8 and 20)
                  example: "0812345678"
      responses:
        '200':
          description: Successfully updated additional phone number
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Other phone number updated successfully."
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid input parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Please provide valid Users_ID and OtherPhone_ID."
                  status:
                    type: boolean
                    example: false
        '403':
          description: Permission denied or not allowed
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Permission denied. This action is only allowed in the application."
                  status:
                    type: boolean
                    example: false
        '404':
          description: Other phone number not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Other phone number not found."
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Error updating phone number."
                  status:
                    type: boolean
                    example: false

  /api/profile/otherphone/get:
    get:
      tags:
        - Profile
      summary: Get user's additional phone numbers
      description: Retrieve all other phone numbers associated with the authenticated user.
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of additional phone numbers retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        OtherPhone_ID:
                          type: integer
                          example: 1
                        Users_ID:
                          type: integer
                          example: 7
                        OtherPhone_Name:
                          type: string
                          example: Emergency Contact
                        OtherPhone_Phone:
                          type: string
                          example: "0823456789"
                  message:
                    type: string
                    example: Other phone numbers retrieved successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Missing or invalid user ID from token
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Missing or invalid Users_ID from token.
                  status:
                    type: boolean
                    example: false
        '404':
          description: No phone numbers found
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items: {}
                  message:
                    type: string
                    example: No other phone numbers found for this user.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An unexpected error occurred.
                  status:
                    type: boolean
                    example: false

  /api/profile/otherphone/getbyphoneid/{OtherPhone_ID}:
    get:
      tags:
        - Profile
      summary: Get other phone number by ID
      description: Retrieve a specific other phone number associated with the authenticated user by its ID.
      security:
        - bearerAuth: []
      parameters:
        - name: OtherPhone_ID
          in: path
          required: true
          schema:
            type: integer
            example: 2
          description: The ID of the other phone number to retrieve.
      responses:
        '200':
          description: Other phone number retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  OtherPhone_ID:
                    type: integer
                    example: 2
                  Users_ID:
                    type: integer
                    example: 7
                  OtherPhone_Name:
                    type: string
                    example: Emergency Contact
                  OtherPhone_Phone:
                    type: string
                    example: "0812345678"
                  message:
                    type: string
                    example: Other phone number retrieved successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Invalid request parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid OtherPhone_ID parameter.
                  status:
                    type: boolean
                    example: false
        '404':
          description: Phone number not found or does not belong to the user
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Other phone number not found or access denied.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An unexpected error occurred.
                  status:
                    type: boolean
                    example: false

  /api/profile/verifypassword:
    post:
      summary: Verify user's password using token
      description: This endpoint verifies if the provided password matches the user's actual password. Requires authentication via Bearer token.
      tags:
        - Profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Users_Password
              properties:
                Users_Password:
                  type: string
                  description: Plaintext password to verify
                  example: myPassword123
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Users_Password
              properties:
                Users_Password:
                  type: string
                  description: Plaintext password to verify
                  example: myPassword123
      responses:
        '200':
          description: Password is correct
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Password verified successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Missing or invalid parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Please fill in the correct parameters as required.
                  status:
                    type: boolean
                    example: false
        '401':
          description: Incorrect password
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Incorrect password.
                  status:
                    type: boolean
                    example: false
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: User not found.
                  status:
                    type: boolean
                    example: false
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: An error occurred on the server.
                  status:
                    type: boolean
                    example: false

  /api/profile/resetpassword:
    post:
      summary: Reset password for the current user
      description: >
        Reset the password for the authenticated user. Requires valid token from `VerifyTokens`.
        Only allowed when `Login_Type` is `application`.
      tags:
        - Profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Current_Password
                - New_Password
              properties:
                Current_Password:
                  type: string
                  example: OldPassword123!
                New_Password:
                  type: string
                  example: NewPassword456!
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - Current_Password
                - New_Password
              properties:
                Current_Password:
                  type: string
                  example: OldPassword123!
                New_Password:
                  type: string
                  example: NewPassword456!
      responses:
        '200':
          description: Password reset successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Password reset successfully.
                  status:
                    type: boolean
                    example: true
        '400':
          description: Bad request (missing parameters or invalid input)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: boolean
        '401':
          description: Current password is incorrect
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: boolean
        '403':
          description: Permission denied (wrong Login_Type)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: boolean
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: boolean
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: boolean

  /api/profile/data/get:
    get:
      summary: Get user profile data by token
      description: Returns the profile data of the user based on decoded token (student, teacher, or staff).
      tags:
        - Profile
      security:
        - bearerAuth: [] 
      responses:
        '200':
          description: Profile data retrieved successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  Student_ID:
                    type: integer
                    example: 123
                  Student_Code:
                    type: string
                    example: "122122211222-1"
                  Student_FirstName:
                    type: string
                    example: "Shogun"
                  Student_LastName:
                    type: string
                    example: "Phrabadang"
                  Student_Phone:
                    type: string
                    example: "0812345678"
                  Student_AcademicYear:
                    type: string
                    example: "2025"
                  Student_RegisTime:
                    type: string
                    format: date-time
                    example: "2025-04-26T10:52:54.000Z"
                  Student_IsGraduated:
                    type: boolean
                    example: false
                  Users_ID:
                    type: integer
                    example: 123
                  Teacher_ID:
                    type: integer
                    example: 456
                  Department_ID:
                    type: integer
                    example: 789
                  Users_Type_Table:
                    type: string
                    example: "student"
                  message:
                    type: string
                    example: "Profile data retrieved successfully."
                  status:
                    type: boolean
                    example: false
        '400':
          description: Bad request due to missing or invalid parameters.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Please fill in the correct parameters as required."
                  status:
                    type: boolean
                    example: false
        '404':
          description: No profile data found for this user.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "No profile data found for this user."
                  status:
                    type: boolean
                    example: false
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "An unexpected error occurred."
                  status:
                    type: boolean
                    example: false

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    schemas:
    ErrorResponse:
      type: object
      properties:
        message:
          type: string
        status:
          type: boolean
